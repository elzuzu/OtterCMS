import{j as s}from"./vendor-ui-CtvHukzg.js";import{r as e}from"./vendor-data-BY55b65u.js";import{D as i}from"./DattaForm-CDg-NNVW.js";import{D as r,a}from"./main-BtLJocfP.js";import{D as t}from"./DattaPageTitle-T82UHXFU.js";import{D as n}from"./DattaCard-Ca8oAgyz.js";import"./vendor-react-DjGYZWH8.js";function o({user:o}){const[l,c]=e.useState(""),[d,u]=e.useState(""),[m,j]=e.useState(!1);return e.useEffect((()=>{const s=o.windows_login||"";s.includes("\\")?c(s.split("\\").pop()):c(s)}),[o]),s.jsxs("div",{className:"pc-content user-settings",children:[s.jsx(t,{title:"Paramètres utilisateur"}),s.jsx(n,{style:{padding:"var(--spacing-2)"},children:s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{children:"Login Windows (nom d'utilisateur uniquement):"}),s.jsxs("div",{style:{display:"flex",gap:"0.25rem",alignItems:"center",marginTop:"0.25rem"},children:[s.jsx(i,{placeholder:"Exemple : jean (sans le domaine)",value:l,onChange:s=>c(s.target.value),style:{marginBottom:0}}),s.jsx(r,{variant:"primary",onClick:async()=>{try{j(!0);let s=l;s.includes("\\")&&(s=s.split("\\").pop());const e=await window.api.associerLoginWindows(o.id||o.userId,s);e.success?u("Login Windows associé avec succès !"):u("Erreur lors de l'association: "+(e.error||"Problème inconnu"))}catch(s){u(`Erreur: ${s.message}`)}finally{j(!1)}},disabled:m,children:m?"Association...":"Associer"})]}),d&&s.jsx(a,{type:d.includes("succès")?"success":"error",children:d})]})}),s.jsx(n,{style:{marginTop:"var(--spacing-3)"},title:"Informations utilisateur",children:s.jsxs("div",{className:"user-info",children:[s.jsxs("div",{children:["Nom d'utilisateur: ",s.jsx("strong",{children:o.username})]}),s.jsxs("div",{children:["Rôle actuel: ",s.jsx("strong",{children:o.role})]}),s.jsxs("div",{children:["ID utilisateur: ",s.jsx("strong",{children:o.id||o.userId})]})]})})]})}export{o as default};
