/* app.css - Version modernisée et complète */

/* ===== VARIABLES CSS (DESIGN TOKENS) ===== */
:root {
   /* Mode clair (par défaut) */
   --color-scheme: light;
   --font-family-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
   --font-family-monospace: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;


   /* Surface et Fond */
   --surface-color: var(--surface-secondary); /* Aligned with Neo UI for component backgrounds, was #ffffff */
   /* --background-color variable removed */

   /* Texte */
   /* --text-color-primary variable removed */
   --text-color-secondary: var(--text-secondary); /* Alias to Neo UI, was #4b5563 */
   --text-color-placeholder: var(--text-tertiary); /* Alias to Neo UI, was #6b7280 */
   --text-color-on-primary: #ffffff; /* Texte sur fond --color-primary-500 - Retained, Neo uses --text-on-theme */

   /* Bordures */
   --border-color-light: var(--color-neutral-200);
   --border-color-medium: var(--color-neutral-300);
   --border-focus-ring: rgba(var(--theme-color-rgb), 0.4); /* Aligned with Neo UI, themeable */

   /* Rayons */
   --border-radius-sm: 0.25rem; /* 4px */
   --border-radius-md: 0.5rem;   /* 8px */
   --border-radius-lg: 0.75rem; /* 12px */
   --border-radius-xl: 1rem;     /* 16px */
   --border-radius-full: 9999px; /* Pour les éléments circulaires */

   /* Ombres - Aligned with Neo UI defaults (dark) */
   --shadow-xs: none; /* Neo UI doesn't have xs, kept for now */
   --shadow-sm: var(--shadow-sm); /* Alias to Neo UI */
   --shadow-md: var(--shadow-md); /* Alias to Neo UI */
   --shadow-lg: var(--shadow-lg); /* Alias to Neo UI */
   --shadow-xl: var(--shadow-xl); /* Alias to Neo UI */
   --shadow-inner: none; /* Neo UI doesn't have inner, kept for now */

   /* Espacements */
   --spacing-1: 0.25rem; /* 4px */
   --spacing-2: 0.5rem;   /* 8px */
   --spacing-3: 0.75rem; /* 12px */
   --spacing-4: 1rem;      /* 16px */
   --spacing-5: 1.25rem; /* 20px */
   --spacing-6: 1.5rem;   /* 24px */
   --spacing-8: 2rem;      /* 32px */
   --spacing-10: 2.5rem; /* 40px */
   --spacing-12: 3rem;     /* 48px */
   --spacing-2xl: 3.5rem; /* 56px */
   --spacing-3xl: 4rem;     /* 64px */

   --sidebar-width-extended: 320px;
   --actions-panel-width-extended: 300px;

   /* Transitions */
   --transition-duration: 150ms;
   --transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);

   /* Variables spécifiques   IndividuFiche (ajoutées si non existantes) */
   --primary-color: var(--color-primary-500);
   --primary-color-light: var(--color-primary-100);
   --secondary-color: var(--color-neutral-500);
   --secondary-color-dark: var(--color-neutral-700);

   --text-color-tertiary: var(--color-neutral-400);
   --text-color-disabled: var(--color-neutral-400);
   --text-color-error: var(--color-danger-500);
   --text-color-error-dark: var(--color-danger-700);
   --text-color-success: var(--color-success-500);
   --text-color-success-dark: var(--color-success-700);
   --text-color-info: var(--color-primary-700);
   --color-info: var(--color-primary-500); /* Added for consistency if used by help-text.important */

   --text-display-xl: 5rem;
   --text-title-xl: 2.5rem;


   --background-color-light: var(--surface-color);
   --background-color-hover-light: var(--color-neutral-100);
   --background-color-disabled: var(--color-neutral-100);
   --background-color-readonly-display: var(--color-neutral-100);
   --background-color-section: var(--surface-color);
   --background-color-error-light: var(--color-danger-50);
   --background-color-success-light: var(--color-success-50);
   --background-color-info-light: var(--color-primary-50);

   --border-color-extra-light: var(--color-neutral-100);
   --border-color-disabled: var(--color-neutral-300);
   --border-color-readonly-display: var(--color-neutral-200);
   --border-color-error: var(--color-danger-500);
   --border-color-success: var(--color-success-500);
   --border-color-info: var(--color-primary-500);
   --header-height: 3rem;
   --header-background: var(--color-primary-600);
   --titlebar-bg: var(--header-background);
   --titlebar-text-color: var(--text-on-accent);
   --titlebar-icon-color: var(--text-on-accent);
   --titlebar-button-hover-bg: rgba(255, 255, 255, 0.1);

   --sidebar-bg: var(--bg-secondary);
   --sidebar-text-color: var(--text-secondary);
   --sidebar-hover-bg: var(--bg-tertiary);
   --sidebar-active-bg: var(--color-primary-50);
   --sidebar-active-text-color: var(--color-primary-700);

   /* Couleurs de fond principales */
   --bg-primary: #f0f2f5;
   --bg-secondary: #ffffff;
   --bg-tertiary: #f8f9fa;
   --bg-overlay: rgba(255, 255, 255, 0.9);

   /* Couleurs de texte */
   --text-primary: #1a1d29;
   --text-secondary: #6c7293;
   --text-tertiary: #a0a9b8;
   --text-on-accent: #ffffff;

   /* Effets et ombres */
   --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.05);
   --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
   --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
   --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.05);
   --shadow-card: 0 0 20px rgba(0, 0, 0, 0.08);
   --elevation-shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
   --elevation-shadow-md: 0 4px 12px rgba(0, 0, 0, 0.15);
   --elevation-shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.2);

   /* Glassmorphism */
   --glass-bg: rgba(255, 255, 255, 0.7);
   --glass-border: rgba(255, 255, 255, 0.3);
   --backdrop-blur: 10px;

   /* Animations */
   --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
   --transition-normal: 300ms cubic-bezier(0.4, 0, 0.2, 1);
   --transition-slow: 500ms cubic-bezier(0.4, 0, 0.2, 1);

   /* Rayons de bordure */
   --radius-sm: 8px;
   --radius-md: 12px;
   --radius-lg: 16px;
   --radius-xl: 24px;
  --radius-full: 9999px;
}


/* ===== BANNIÈRES - DÉFINITION SIMPLE ET EFFICACE ===== */

.banner,
.banner-success,
.success-message,
.message-success {
  background-color: var(--color-primary-50) !important;
  border: 1px solid var(--color-primary-500) !important;
  color: var(--color-primary-700) !important;
  padding: 12px 16px;
  margin-bottom: 16px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.banner-error,
.error-message,
.message-error {
  background-color: var(--color-danger-50) !important;
  border: 1px solid var(--color-danger-500) !important;
  color: var(--color-danger-700) !important;
  padding: 12px 16px;
  margin-bottom: 16px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.banner-warning,
.warning-message {
  background-color: var(--color-warning-50) !important;
  border: 1px solid var(--color-warning-500) !important;
  color: var(--color-warning-700) !important;
  padding: 12px 16px;
  margin-bottom: 16px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.banner-info,
.info-message {
  background-color: var(--color-primary-50) !important;
  border: 1px solid var(--color-primary-500) !important;
  color: var(--color-primary-700) !important;
  padding: 12px 16px;
  margin-bottom: 16px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* ===== FORCE L'APPLICATION EN MODE LIGHT ET DARK ===== */

[data-theme="light"] .banner,
[data-theme="light"] .banner-success,
[data-theme="light"] .success-message,
[data-theme="light"] .message-success {
  background-color: var(--color-primary-50) !important;
  border-color: var(--color-primary-500) !important;
  color: var(--color-primary-700) !important;
}

[data-theme="dark"] .banner,
[data-theme="dark"] .banner-success,
[data-theme="dark"] .success-message,
[data-theme="dark"] .message-success {
  background: rgba(var(--theme-color-rgb), 0.1) !important;
  border: 1px solid rgba(var(--theme-color-rgb), 0.3) !important;
  color: var(--theme-color-light) !important;
}
[data-theme="dark"] .banner-error {
  background: rgba(239, 68, 68, 0.1) !important;
  border: 1px solid rgba(239, 68, 68, 0.3) !important;
  color: #FCA5A5 !important;
}

/* ===== BOUTONS ET AUTRES ÉLÉMENTS UTILISANT LES COULEURS PRIMAIRES ===== */

/* This .btn-primary rule seems to be an override for external components, keep as is or review separately if it needs Neo alignment. */
.btn-primary {
  background-color: var(--color-primary-500) !important;
  border-color: var(--color-primary-500) !important;
  color: white !important;
}

.btn-primary:hover {
  background-color: var(--color-primary-600) !important;
  border-color: var(--color-primary-600) !important;
}

/* Mode sombre */
[data-theme="dark"] {
  --color-scheme: dark;

  --bg-primary: var(--background-color-dark);
  --bg-secondary: var(--surface-color-dark-dp01);
  --bg-tertiary: var(--surface-color-dark-dp02);
  --bg-overlay: rgba(18, 18, 18, 0.9);

  /* Surfaces avec élévation progressive */
  --surface-level-0: var(--background-color-dark);
  --surface-level-1: var(--surface-color-dark-dp01);
  --surface-level-2: var(--surface-color-dark-dp02);
  --surface-level-3: var(--surface-color-dark-dp03);
  --surface-overlay: rgba(255, 255, 255, 0.07);

  --text-primary: var(--text-color-dark);
   --text-secondary: var(--text-secondary); /* Uses Neo var */
   --text-tertiary: var(--text-tertiary); /* Uses Neo var */

   /* --text-primary-dark, --text-secondary-dark, etc. may become redundant if Neo vars cover them */
   --text-primary-dark: var(--text-color-dark); 
   --text-secondary-dark: var(--text-color-secondary-dark); 
   --text-tertiary-dark: var(--text-color-disabled-dark); 
   --text-disabled-dark: var(--text-color-disabled-dark); 

  /* Adaptation des couleurs de base */
   /* Redundant definitions removed as they should be inherited from neo-ui via :root or direct usage */
   /* --background-color: var(--surface-level-0); */
   /* --surface-color: var(--surface-level-1); */
   /* --text-color-primary: var(--text-primary); */
   /* --text-color-secondary: var(--text-secondary); */
   /* --text-color-tertiary: var(--text-tertiary); */

  /* Couleurs d'accentuation adaptées */
  --accent-primary-dark: var(--theme-color-light);
  --accent-on-dark: rgba(var(--theme-color-rgb), 0.15);

   --glass-bg: rgba(17, 24, 39, 0.7); /* Retained from app.css, Neo has similar */
   --glass-border: rgba(255, 255, 255, 0.1); /* Retained from app.css, Neo has similar */

   /* Shadow overrides for dark theme in app.css are removed, Neo UI should handle this */
   /* --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3); */
   /* --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.3); */
   /* --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3); */
   /* --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.3); */
   /* --shadow-card: 0 0 20px rgba(0, 0, 0, 0.4); */
   /* --elevation-shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3); */
   /* --elevation-shadow-md: 0 4px 12px rgba(0, 0, 0, 0.4); */
   /* --elevation-shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.5); */

  --titlebar-bg: var(--header-background);
  --titlebar-text-color: var(--text-on-accent);
  --titlebar-icon-color: var(--text-on-accent);
  --titlebar-button-hover-bg: rgba(255, 255, 255, 0.1);

  --sidebar-bg: var(--bg-secondary);
  --sidebar-text-color: var(--text-secondary);
  --sidebar-hover-bg: rgba(255, 255, 255, 0.05);
  --sidebar-active-bg: var(--color-primary-600);
  --sidebar-active-text-color: var(--text-on-accent);
}

[data-theme="light"] {
  /* Surfaces avec élévation progressive - Mode Light */
  --surface-level-0: #ffffff;
  --surface-level-1: #f8f9fa;
  --surface-level-2: #f1f3f4;
  --surface-level-3: #e8eaed;
  --surface-overlay: rgba(0, 0, 0, 0.05);

  /* Textes avec contraste adapté - Mode Light */
  --text-primary-light: #1a1a1a;
   --text-secondary-light: #444444; /* These specific light theme text colors might be covered by Neo's --text-secondary in light mode */
   --text-tertiary-light: #666666;  /* These specific light theme text colors might be covered by Neo's --text-tertiary in light mode */
  --text-disabled-light: #999999;

  /* Couleurs d'accentuation adaptées - Mode Light */
  --accent-primary-light: var(--theme-color);
  --accent-on-light: rgba(var(--theme-color-rgb), 0.08);

  /* Adaptation des couleurs de base */
   /* Redundant definitions removed as they should be inherited from neo-ui via :root or direct usage */
   /* --background-color: var(--surface-level-0); */
   /* --surface-color: var(--surface-level-1); */
   /* --text-color-primary: var(--text-primary-light); */
   /* --text-color-secondary: var(--text-secondary-light); */
   /* --text-color-tertiary: var(--text-tertiary-light); */

  --theme-color-adapted: hsl(from var(--theme-color) h calc(s * 0.9) calc(l * 0.8));
  --theme-color-light-adapted: hsl(from var(--theme-color) h calc(s * 0.7) calc(l * 0.9));
   /* Shadow overrides for light theme in app.css are removed, Neo UI should handle this */
}

*,
*::before,
*::after {
   box-sizing: border-box;
   margin: 0;
   padding: 0;
}

html {
   -webkit-font-smoothing: antialiased;
   -moz-osx-font-smoothing: grayscale;
   font-size: 14px; /* Aligned with Neo UI */
}

body, html, #root, .app {
   /* overflow-x: hidden; */ /* Commenté pour permettre le défilement si nécessaire au niveau de l'app, mais attention aux effets de bord */
   width: 100%;
   height: 100%;
}

*:focus-visible {
  outline: 2px solid var(--theme-color);
  outline-offset: 2px;
}

body {
   font-family: var(--font-family-sans);
   background-color: var(--surface-primary); /* Aligned with Neo UI */
   color: var(--text-primary); /* Aligned with Neo UI */
   line-height: 1.6;
}

/* ===== TYPOGRAPHIE ===== */
h1, h2, h3, h4, h5, h6 {
   color: var(--text-primary); /* Aligned with Neo UI */
   font-weight: 600; /* Semi-bold pour les titres - Retained from app.css, Neo doesn't specify general heading weight */
   line-height: 1.3;
}

h1 { font-size: 2.25rem; margin-bottom: var(--spacing-md); } /* 36px, margin aligned to neo (--spacing-md is 16px) */
h2 { font-size: 1.875rem; margin-bottom: var(--spacing-lg); } /* 30px, margin aligned to neo (--spacing-lg is 24px) */
h3 { font-size: 1.5rem; margin-bottom: var(--spacing-lg); }    /* 24px, margin aligned to neo (--spacing-lg is 24px, was spacing-5/20px) */
h4 { font-size: 1.25rem; margin-bottom: var(--spacing-md); } /* 20px, margin aligned to neo */
h5 { font-size: 1rem; margin-bottom: var(--spacing-md); }    /* Added h5 with margin */
h6 { font-size: 0.875rem; margin-bottom: var(--spacing-md); } /* Added h6 with margin */

p { margin-bottom: var(--spacing-md); } /* Aligned with Neo UI (--spacing-md is 16px) */

a {
   color: var(--theme-color); /* Aligned with Neo UI */
   text-decoration: none;
   transition: color var(--transition-fast); /* Aligned with Neo UI */
}
a:hover {
   color: var(--theme-color-dark); /* Aligned with Neo UI */
   text-decoration: underline;
}

/* ===== STRUCTURE GÉNÉRALE DE L'APPLICATION ===== */
.app {
   max-width: 1400px; /* Augmentation pour les écrans larges */
   margin: 0 auto;
   padding: 0 var(--spacing-8) var(--spacing-6); /* Remove top padding to stick header */
   display: flex;
   flex-direction: column;
   min-height: 100vh;
}

header.app-header {
   position: sticky;
   top: 0;
   z-index: 100;
   display: flex;
   flex-wrap: wrap; /* Pour une meilleure responsivité */
   align-items: center;
   justify-content: space-between;
   background-color: var(--titlebar-bg);
   backdrop-filter: blur(6px) saturate(150%);
   box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
   color: var(--titlebar-text-color);
   padding: var(--spacing-2) var(--spacing-8);
   margin-bottom: var(--spacing-4);
   min-height: var(--header-height);
   border-radius: 0;
   position: relative;
   -webkit-app-region: drag;
}

.app-title {
   margin-bottom: 0;
   font-size: 1.2rem;
   font-weight: 600;
   color: var(--titlebar-text-color);
   font-family: var(--font-family-sans);
}

.header-right {
   display: flex;
   align-items: center;
   gap: var(--spacing-4);
}

.header-right {
   -webkit-app-region: no-drag;
}

.app-logo {
   width: 24px;
   height: 24px;
}

.user-info {
   font-size: 0.875rem; /* 14px */
   color: var(--sidebar-text-color);
}
.user-info strong {
      color: var(--sidebar-text-color);
}


.app-body {
   display: flex;
   min-height: calc(100vh - 120px); /* Ajuster si la hauteur du header/footer change */
   flex-grow: 1; /* Permet au corps de grandir */
}

.main-nav {
   width: 220px;
   padding: var(--spacing-4) var(--spacing-2);
   border-right: 1px solid var(--border-default); /* Neo UI consistent border */
   background-color: var(--surface-color);
   position: sticky;
   top: var(--header-height); /* Utilise la variable pour la hauteur de l'en-tête */
   align-self: flex-start;
   height: calc(100vh - (var(--spacing-6) * 2) - 50px); /* Hauteur approx. pour sticky nav,   ajuster */
   overflow-y: auto; /* Si la nav devient trop longue */
}

.main-nav ul {
   list-style: none;
   padding: 0;
   margin: 0;
   display: flex;
   flex-direction: column;
   gap: var(--spacing-1);
}

.main-nav ul li button {
   width: 100%;
   display: flex;
   align-items: center;
   gap: var(--spacing-2);
   padding: var(--spacing-2) var(--spacing-3);
   font-size: 0.875rem;
   font-weight: 500;
   border-radius: var(--border-radius-md);
   border: none;
   cursor: pointer;
   background-color: transparent;
   color: var(--text-color-secondary);
   transition: background-color var(--transition-duration) var(--transition-timing-function);
}

.main-nav ul li button:hover:not(:disabled) {
   background-color: var(--color-neutral-100);
   color: var(--color-primary-600);
}

.main-nav ul li button.active {
   background-color: var(--color-primary-50);
   color: var(--color-primary-700);
   font-weight: 600;
}

.main-nav ul li button:focus-visible {
   outline: none;
   box-shadow: 0 0 0 3px var(--border-focus-ring);
}

.main-nav ul li button:disabled {
   opacity: 0.6;
   cursor: not-allowed;
}

.tab-icon {
   display: inline-flex;
}

.content {
   flex-grow: 1;
   padding: var(--spacing-4);
   overflow-y: auto; /* Permet au contenu principal de défiler si besoin */
   width: calc(100% - 220px); /* Si la nav est visible */
}


/* ===== BOUTONS (BASE ET VARIANTES) ===== */
/* Style de base commun   tous les boutons spécifiques ci-dessous - Aligned with Neo UI .btn */
.btn-base {
   display: inline-flex;
   align-items: center;
   justify-content: center;
   padding: var(--spacing-sm) var(--spacing-lg); /* Neo UI: 8px 24px */
   font-size: 0.875rem; /* 14px - Consistent */
   font-weight: 600; /* Neo UI: 600 */
   border-radius: var(--radius-md); /* Neo UI: 8px - Consistent with app.css's --border-radius-md */
   border: none; /* Neo UI: border: none */
   cursor: pointer;
   transition: all var(--transition-fast); /* Neo UI */
   text-decoration: none;
   white-space: nowrap;
   letter-spacing: 0.05em; /* Neo UI */
   text-transform: uppercase; /* Neo UI */
   position: relative; /* For Neo UI's ::before ripple effect if added later */
   overflow: hidden; /* For Neo UI's ::before ripple effect if added later */
}

.btn-base:focus-visible {
   outline: 2px solid transparent; /* Retained from app.css */
   outline-offset: 2px; /* Retained from app.css */
   box-shadow: 0 0 0 3px var(--border-focus-ring); /* Consistent with app.css focus ring variable */
}

.btn-base:disabled {
   opacity: 0.6;
   cursor: not-allowed;
}

/* Bouton Primaire - Aligned with Neo UI .btn-primary */
.btn-primary {
   /* Inherits structure from .btn-base if class is applied, or repeat properties if used as a standalone class */
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); border: none; cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; letter-spacing: 0.05em; text-transform: uppercase; position: relative; overflow: hidden;
   background-color: var(--theme-color); /* Neo UI */
   color: var(--text-on-theme); /* Neo UI */
   /* border: none; implicitly from .btn-base if class is applied, or explicitly here */
}
.btn-primary:hover:not(:disabled) {
   background-color: var(--theme-color-dark); /* Neo UI uses theme-color-light, using dark for more typical hover */
   transform: translateY(-1px); /* Neo UI */
   box-shadow: var(--shadow-md); /* Neo UI */
}
.btn-primary:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.btn-primary:disabled { opacity: 0.6; cursor: not-allowed; }


/* Bouton Secondaire (contour) - Aligned with Neo UI .btn-secondary */
.btn-secondary {
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; letter-spacing: 0.05em; text-transform: uppercase; position: relative; overflow: hidden;
   background-color: transparent; /* Neo UI */
   color: var(--theme-color); /* Neo UI */
   border: 1px solid var(--theme-color); /* Neo UI */
}
.btn-secondary:hover:not(:disabled) {
   background-color: rgba(var(--theme-color-rgb), 0.1); /* Neo UI */
   border-color: var(--theme-color-light); /* Neo UI */
}
.btn-secondary:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.btn-secondary:disabled { opacity: 0.6; cursor: not-allowed; }

/* Bouton Tertiaire/Ghost (texte seul) - Aligned with Neo UI .btn-ghost */
.btn-tertiary {
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; position: relative; overflow: hidden; /* Base structure from .btn-base */
   background-color: transparent; /* Neo UI */
   color: var(--text-secondary); /* Neo UI */
   border: 1px solid var(--border-default); /* Neo UI */
   text-transform: none; /* Neo UI */
   letter-spacing: normal; /* Neo UI */
}
.btn-tertiary:hover:not(:disabled) {
   background-color: rgba(255, 255, 255, 0.05); /* Neo UI */
   color: var(--text-primary); /* Neo UI */
   border-color: var(--border-strong); /* Neo UI */
}
.btn-tertiary:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.btn-tertiary:disabled { opacity: 0.6; cursor: not-allowed; }

/* Bouton Danger */
.btn-danger {
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); border: none; cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; letter-spacing: 0.05em; text-transform: uppercase; position: relative; overflow: hidden;
   background-color: var(--color-danger-500);
   color: var(--text-on-theme); /* Consistent with Neo's primary button text on theme color */
   /* border: none; by default from .btn-base structure */
}
.btn-danger:hover:not(:disabled) {
   background-color: var(--color-danger-700); /* Darken on hover */
   transform: translateY(-1px); /* Neo UI hover effect */
   box-shadow: var(--shadow-md); /* Neo UI hover effect */
}
.btn-danger:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.btn-danger:disabled { opacity: 0.6; cursor: not-allowed; }

/* Bouton Succès */
.btn-success {
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); border: none; cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; letter-spacing: 0.05em; text-transform: uppercase; position: relative; overflow: hidden;
   background-color: var(--color-success-500);
   color: var(--text-on-theme); /* Consistent with Neo's primary button text on theme color */
   /* border: none; by default from .btn-base structure */
}
.btn-success:hover:not(:disabled) {
   background-color: var(--color-success-700); /* Darken on hover */
   transform: translateY(-1px); /* Neo UI hover effect */
   box-shadow: var(--shadow-md); /* Neo UI hover effect */
}
.btn-success:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.btn-success:disabled { opacity: 0.6; cursor: not-allowed; }


/* Application des styles de boutons aux éléments HTML (via leurs classes existantes) */
/* These will now inherit from .btn-danger or .btn-success, etc. or have their styles directly updated */
header .logout-button {
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); border: none; cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; letter-spacing: 0.05em; text-transform: uppercase; position: relative; overflow: hidden;
   background-color: var(--color-danger-500);
   color: var(--text-on-theme);
}
header .logout-button:hover:not(:disabled) {
   background-color: var(--color-danger-700);
   transform: translateY(-1px);
   box-shadow: var(--shadow-md);
}
header .logout-button:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
header .logout-button:disabled { opacity: 0.6; cursor: not-allowed; }

.add-button { /* To look like new .btn-secondary */
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; letter-spacing: 0.05em; text-transform: uppercase; position: relative; overflow: hidden;
   background-color: transparent;
   color: var(--theme-color);
   border: 1px solid var(--theme-color);
}
.add-button:hover:not(:disabled) {
   background-color: rgba(var(--theme-color-rgb), 0.1);
   border-color: var(--theme-color-light);
}
.add-button:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.add-button:disabled { opacity: 0.6; cursor: not-allowed; }

.columns-button { /* To look like new .btn-secondary */
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; letter-spacing: 0.05em; text-transform: uppercase; position: relative; overflow: hidden;
   background-color: transparent;
   color: var(--theme-color);
   border: 1px solid var(--theme-color);
}
.columns-button:hover:not(:disabled) {
   background-color: rgba(var(--theme-color-rgb), 0.1);
   border-color: var(--theme-color-light);
}
.columns-button:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.columns-button:disabled { opacity: 0.6; cursor: not-allowed; }

.delete-button { /* To look like new .btn-danger */
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); border: none; cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; letter-spacing: 0.05em; text-transform: uppercase; position: relative; overflow: hidden;
   background-color: var(--color-danger-500);
   color: var(--text-on-theme);
}
.delete-button:hover:not(:disabled) {
   background-color: var(--color-danger-700);
   transform: translateY(-1px);
   box-shadow: var(--shadow-md);
}
.delete-button:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.delete-button:disabled { opacity: 0.6; cursor: not-allowed; }

.cancel-button { /* To look like new .btn-tertiary but with neutral colors */
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; position: relative; overflow: hidden;
   background-color: transparent;
   color: var(--text-color-secondary); /* Using app's secondary text color for neutral */
   border: 1px solid var(--border-color-medium); /* Using app's medium border for neutral */
   text-transform: none;
   letter-spacing: normal;
}
.cancel-button:hover:not(:disabled) {
   background-color: rgba(108, 117, 125, 0.1); /* Neutral hover, e.g. using gray values */
   color: var(--text-color-primary);
   border-color: var(--border-color-medium) /* Or a slightly darker neutral border */;
}
.cancel-button:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.cancel-button:disabled { opacity: 0.6; cursor: not-allowed; }

.btn-modifier { /* To look like new .btn-primary */
     display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); border: none; cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; letter-spacing: 0.05em; text-transform: uppercase; position: relative; overflow: hidden;
   background-color: var(--theme-color);
   color: var(--text-on-theme);
}
.btn-modifier:hover:not(:disabled) {
   background-color: var(--theme-color-dark);
   transform: translateY(-1px);
   box-shadow: var(--shadow-md);
}
.btn-modifier:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.btn-modifier:disabled { opacity: 0.6; cursor: not-allowed; }

.btn-sauvegarder { /* To look like new .btn-success */
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); border: none; cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; letter-spacing: 0.05em; text-transform: uppercase; position: relative; overflow: hidden;
   background-color: var(--color-success-500);
   color: var(--text-on-theme);
}
.btn-sauvegarder:hover:not(:disabled) {
   background-color: var(--color-success-700);
   transform: translateY(-1px);
   box-shadow: var(--shadow-md);
}
.btn-sauvegarder:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.btn-sauvegarder:disabled { opacity: 0.6; cursor: not-allowed; }

.btn-annuler { /* To look like new .btn-danger */
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); border: none; cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; letter-spacing: 0.05em; text-transform: uppercase; position: relative; overflow: hidden;
   background-color: var(--color-danger-500);
   color: var(--text-on-theme);
}
.btn-annuler:hover:not(:disabled) {
   background-color: var(--color-danger-700);
   transform: translateY(-1px);
   box-shadow: var(--shadow-md);
}
.btn-annuler:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.btn-annuler:disabled { opacity: 0.6; cursor: not-allowed; }

.btn-fermer { /* To look like new .btn-tertiary */
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; position: relative; overflow: hidden;
   background-color: transparent;
   color: var(--text-secondary);
   border: 1px solid var(--border-default);
   text-transform: none;
   letter-spacing: normal;
}
.btn-fermer:hover:not(:disabled) {
   background-color: rgba(255, 255, 255, 0.05);
   color: var(--text-primary);
   border-color: var(--border-strong);
}
.btn-fermer:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.btn-fermer:disabled { opacity: 0.6; cursor: not-allowed; }

.restore-button { /* To look like new .btn-success */
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); border: none; cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; letter-spacing: 0.05em; text-transform: uppercase; position: relative; overflow: hidden;
   background-color: var(--color-success-500);
   color: var(--text-on-theme);
}
.restore-button:hover:not(:disabled) {
   background-color: var(--color-success-700);
   transform: translateY(-1px);
   box-shadow: var(--shadow-md);
}
.restore-button:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.restore-button:disabled { opacity: 0.6; cursor: not-allowed; }

.toggle-button { /* To look like new .btn-secondary */
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; letter-spacing: 0.05em; text-transform: uppercase; position: relative; overflow: hidden;
   background-color: transparent;
   color: var(--theme-color);
   border: 1px solid var(--theme-color);
}
.toggle-button:hover:not(:disabled) {
   background-color: rgba(var(--theme-color-rgb), 0.1);
   border-color: var(--theme-color-light);
}
.toggle-button:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.toggle-button:disabled { opacity: 0.6; cursor: not-allowed; }

button:not([class*="btn-"]):not([class*="-button"]):not([class*="button-"]):not(.nav-item) { /* To look like new .btn-tertiary */
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; position: relative; overflow: hidden;
   background-color: transparent;
   color: var(--text-secondary);
   border: 1px solid var(--border-default);
   text-transform: none;
   letter-spacing: normal;
}
button:not([class*="btn-"]):not([class*="-button"]):not([class*="button-"]):not(.nav-item):hover:not(:disabled) {
   background-color: rgba(255, 255, 255, 0.05);
   color: var(--text-primary);
   border-color: var(--border-strong);
}
button:not([class*="btn-"]):not([class*="-button"]):not([class*="button-"]):not(.nav-item):focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
button:not([class*="btn-"]):not([class*="-button"]):not([class*="button-"]):not(.nav-item):disabled { opacity: 0.6; cursor: not-allowed; }


/* ===== FORMULAIRES ET CONTRÔLES ===== */
.form-group {
   margin-bottom: var(--spacing-3);
}

.form-group label {
   display: block;
   margin-bottom: var(--spacing-2);
   font-weight: 500;
   color: var(--text-color-primary);
   font-size: 0.875rem; /* 14px */
}

input[type="text"],
input[type="password"],
input[type="email"],
input[type="number"],
input[type="date"],
input[type="search"],
textarea,
select {
   display: block;
   width: 100%;
   padding: var(--spacing-md); /* Neo UI: 16px */
   font-size: 0.9375rem; /* Neo UI: 15px */
   line-height: 1.5; /* Retained from app.css */
   color: var(--text-primary); /* Neo UI (via body color) */
   /* background-color handled by theme-specific rules below */
   background-clip: padding-box; /* Retained */
   border: 1px solid var(--border-default); /* Neo UI */
   border-radius: var(--radius-md); /* Neo UI (8px), consistent with app.css's --border-radius-md */
   box-shadow: none; /* Neo UI inputs don't have inner shadow by default */
   transition: all var(--transition-fast); /* Neo UI */
}

input:focus, textarea:focus, select:focus {
   outline: 0;
   border-color: var(--theme-color); /* Neo UI */
   /* background-color handled by theme-specific focus rules below */
   box-shadow: 0 0 0 3px rgba(var(--theme-color-rgb), 0.25); /* Neo UI */
}

input::placeholder, textarea::placeholder {
   color: var(--text-tertiary); /* Neo UI (via app.css alias) */
   opacity: 1; /* Retained */
}

/* Theme-specific input styling based on Neo UI */
[data-theme="dark"] input,
[data-theme="dark"] select,
[data-theme="dark"] textarea {
  background: var(--neo-gray-200); /* Slightly lighter than Neo's default input for better contrast if needed, or use var(--surface-tertiary) / rgba(255,255,255,0.05) */
  border-color: var(--border-default); /* Consistent with Neo */
  color: var(--text-primary); /* Consistent */
}

[data-theme="dark"] input:focus,
[data-theme="dark"] select:focus,
[data-theme="dark"] textarea:focus {
  background: rgba(255, 255, 255, 0.1); /* Neo UI focus background for dark */
  border-color: var(--theme-color); /* Consistent */
  box-shadow: 0 0 0 3px rgba(var(--theme-color-rgb), 0.25); /* Consistent */
}

[data-theme="light"] input,
[data-theme="light"] select,
[data-theme="light"] textarea {
  background: var(--neo-gray-900); /* Neo UI light theme input background (e.g. --surface-level-0 or a specific light input bg) */
  border-color: var(--border-default); /* Consistent with Neo */
  color: var(--text-primary); /* Consistent for light mode */
}

[data-theme="light"] input:focus,
[data-theme="light"] select:focus,
[data-theme="light"] textarea:focus {
  background: var(--neo-white); /* Neo UI light theme focus background */
  border-color: var(--theme-color); /* Consistent */
  box-shadow: 0 0 0 3px rgba(var(--theme-color-rgb), 0.15); /* Neo UI light theme focus shadow */
}

[data-theme="light"] input::placeholder,
[data-theme="light"] textarea::placeholder {
  color: var(--text-tertiary); /* Consistent */
}

input[type="file"] {
   border: 1px dashed var(--border-default); /* Neo UI border variable */
   padding: var(--spacing-md); /* Neo UI spacing (16px) */
   background-color: var(--color-neutral-50); /* Retained, suitable light gray */
   border-radius: var(--radius-md); /* Neo UI radius (8px), consistent with app.css --border-radius-md */
}
input[type="file"]:hover {
   border-color: var(--theme-color); /* Neo UI theme color for hover */
}

input[type="checkbox"] {
   width: 1rem; /* 16px */
   height: 1rem; /* 16px */
   margin-right: var(--spacing-2); /* Retained from app.css */
   border-radius: var(--radius-sm); /* Neo UI (4px), consistent with app.css --border-radius-sm */
   border: 1px solid var(--border-default); /* Neo UI */
   accent-color: var(--theme-color); /* Neo UI */
}
input[type="checkbox"]:focus {
   outline: 2px solid transparent; /* Retained */
   outline-offset: 2px; /* Retained */
   box-shadow: 0 0 0 3px var(--border-focus-ring); /* Consistent with updated focus ring */
}

.checkbox-container {
   display: flex;
   align-items: center;
   gap: var(--spacing-2);
}
.checkbox-container label {
   margin-bottom: 0;
   font-weight: normal;
}

.select-stylish {
   appearance: none;
   background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%2364748b'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E");
   background-repeat: no-repeat;
   background-position: right var(--spacing-3) center;
   background-size: 1em 1em;
   padding-right: var(--spacing-8);
}

.form-actions {
   margin-top: var(--spacing-6);
   display: flex;
   justify-content: flex-end;
   gap: var(--spacing-3);
}

.obligatoire {
   color: var(--color-danger-500);
   margin-left: var(--spacing-1);
   font-weight: normal;
}

/* ===== MESSAGES ET NOTIFICATIONS (BASE ET VARIANTES) ===== */
.message-base-style {
   padding: var(--spacing-4);
   margin: var(--spacing-4) 0;
   border-radius: var(--border-radius-md);
   border-width: 1px;
   border-style: solid;
   display: flex;
   align-items: center;
   gap: var(--spacing-3);
}
.message-base-style::before {
   font-size: 1.25em;
   line-height: 1;
}

.success, .success-message {
   padding: var(--spacing-4); margin: var(--spacing-4) 0; border-radius: var(--border-radius-md); border-width: 1px; border-style: solid; display: flex; align-items: center; gap: var(--spacing-3);
   background-color: var(--color-primary-50);
   border-color: var(--color-primary-500);
   color: var(--color-primary-700);
}
.success::before, .success-message::before { content: '✅'; font-size: 1.25em; line-height: 1;}

.error, .error-message {
   padding: var(--spacing-4); margin: var(--spacing-4) 0; border-radius: var(--border-radius-md); border-width: 1px; border-style: solid; display: flex; align-items: center; gap: var(--spacing-3);
   background-color: var(--color-danger-50);
   border-color: var(--color-danger-500);
   color: var(--color-danger-700);
}
.error::before, .error-message::before { content: '❌'; font-size: 1.25em; line-height: 1;}

.warning, .warning-message { /* Ajout de .warning-message */
   padding: var(--spacing-4); margin: var(--spacing-4) 0; border-radius: var(--border-radius-md); border-width: 1px; border-style: solid; display: flex; align-items: center; gap: var(--spacing-3);
   background-color: var(--color-warning-50);
   border-color: var(--color-warning-500);
   color: var(--color-warning-700);
}
.warning::before, .warning-message::before { content: ' ️'; font-size: 1.25em; line-height: 1;}

.info-message { /* Ajout pour les messages d'information généraux */
   padding: var(--spacing-4); margin: var(--spacing-4) 0; border-radius: var(--border-radius-md); border-width: 1px; border-style: solid; display: flex; align-items: center; gap: var(--spacing-3);
   background-color: var(--color-primary-50);
   border-color: var(--color-primary-500);
   color: var(--color-primary-700);
}
.info-message::before { content: 'ℹ️'; font-size: 1.25em; line-height: 1;}


.loading-message, .loading {
   color: var(--text-color-secondary);
   padding: var(--spacing-8);
   text-align: center;
   margin: var(--spacing-8) 0;
   display: flex;
   flex-direction: column;
   align-items: center;
   gap: var(--spacing-4);
}

.loading::before {
   content: "";
   display: block;
   width: 32px;
   height: 32px;
   border-radius: 50%;
   border: 3px solid var(--color-neutral-200);
   border-top-color: var(--color-primary-500);
   animation: spin 0.8s linear infinite;
}

@keyframes spin {
   to { transform: rotate(360deg); }
}

.no-data-message {
   color: var(--text-color-secondary);
   background-color: var(--color-neutral-100);
   padding: var(--spacing-6);
   border-radius: var(--border-radius-lg);
   text-align: center;
   margin: var(--spacing-6) 0;
   border: 1px dashed var(--border-color-medium);
}

/* === STYLES AMÉLIORES POUR LES TABLEAUX === */

/* Conteneur responsive pour les tableaux avec largeurs fixes */
.table-responsive {
   width: 100%;
   overflow-x: auto;
   border: 1px solid var(--border-color-light);
   border-radius: var(--border-radius-lg);
   margin-bottom: var(--spacing-4);
   scrollbar-width: thin;
   scrollbar-color: var(--color-neutral-300) transparent;
   box-shadow: var(--shadow-sm);
   background-color: var(--surface-color);
}

.table-responsive::-webkit-scrollbar {
   height: 8px;
}

.table-responsive::-webkit-scrollbar-thumb {
   background-color: var(--color-neutral-300);
   border-radius: var(--border-radius-full);
}

.table-responsive::-webkit-scrollbar-track {
   background: var(--color-neutral-100);
   border-radius: var(--border-radius-full);
}

/* Tableau avec largeurs fixes et alignement amélioré */
/* Applied to .individus-table, .users-table, .audit-table as well if they adopt this structure */
.data-table {
   width: 100%;
   border-collapse: separate; /* Changed from collapse */
   border-spacing: 0;
   font-size: 0.875rem;
   table-layout: fixed; /* Important pour respecter les largeurs de colonnes */
}

.data-table th,
.data-table td {
   padding: 1px; /* Updated padding to 1px */
   text-align: left;
   border-bottom: 1px solid var(--border-color-light);
   vertical-align: middle; /* Added for better alignment */
   overflow: hidden; /* Added for text-overflow */
   text-overflow: ellipsis; /* Added for long text */
   white-space: nowrap;
   box-sizing: border-box; /* Important pour un calcul précis des largeurs */
}

.data-table th {
   background-color: var(--color-neutral-50);
   font-weight: 600; /* Was 500, made bolder */
   color: var(--text-color-primary); /* Was secondary, made primary */
   text-transform: uppercase;
   font-size: 0.75rem;
   letter-spacing: 0.05em;
   position: sticky;
   top: 0;
   z-index: 2; /* Increased z-index */
   border-bottom: 2px solid var(--border-color-medium); /* Stronger bottom border for header */
}

/* S'assurer que toutes les cellules respectent les largeurs définies inline */
.data-table th[style*="width"],
.data-table td[style*="width"] {
   box-sizing: border-box;
}

/* Alignement spécifique pour la colonne d'actions (souvent la première ou dernière) */
.data-table th:first-child, /* Example: if actions are first */
.data-table td:first-child {
   text-align: center;
}
/* .data-table th:last-child, .data-table td:last-child { text-align: center; } */ /* Example: if actions are last */


.data-table th:first-child {
   border-top-left-radius: var(--border-radius-lg); /* Rounded corners for table container */
}

.data-table th:last-child {
   border-top-right-radius: var(--border-radius-lg); /* Rounded corners for table container */
}

.data-table tbody tr {
   transition: background-color var(--transition-duration) var(--transition-timing-function);
}

.data-table tbody tr:hover {
   background-color: var(--color-neutral-100);
}

.data-table tbody tr:last-child td {
   border-bottom: none;
}

/* Ligne de filtres spéciale */
.data-table .filter-row {
   background-color: var(--color-neutral-100);
   border-bottom: 2px solid var(--border-color-medium); /* Consistent with header */
}

.data-table .filter-row td {
   padding: var(--spacing-1); /* Reduced padding for filter inputs */
   border-bottom: none; /* No bottom border for filter cells */
   vertical-align: middle;
}

.data-table .filter-row input {
   width: 100%; /* Make input take full cell width */
   padding: var(--spacing-1) var(--spacing-2); /* Adjust input padding */
   font-size: 0.875rem;
   border: 1px solid var(--border-color-medium);
   border-radius: var(--border-radius-sm);
   background-color: var(--surface-color);
   transition: border-color var(--transition-duration) var(--transition-timing-function);
   box-sizing: border-box;
}

.data-table .filter-row input:focus {
   border-color: var(--color-primary-500);
   outline: none;
   box-shadow: 0 0 0 2px var(--border-focus-ring);
}

/* Style pour les boutons d'action dans les cellules - Aligned with Neo UI .btn-icon principles */
.data-table .btn-icon {
   width: 32px; /* Adjusted for table density */
   height: 32px; /* Adjusted for table density */
   padding: 0; 
   border-radius: var(--radius-full); /* Neo UI: circular */
   background-color: transparent;
   border: 1px solid transparent; 
   color: var(--text-secondary); /* Neo UI: default secondary text color */
   display: inline-flex;
   align-items: center;
   justify-content: center; 
   transition: all var(--transition-fast); 
   text-transform: none; /* Icon buttons typically don't have text transform */
   letter-spacing: normal; /* Reset letter-spacing */
}
.data-table .btn-icon:hover {
   background-color: rgba(var(--theme-color-rgb), 0.1); /* Neo UI: themed hover */
   color: var(--theme-color); /* Neo UI: themed hover text color */
}
/* Specific icon button types if needed - ensure hover color is appropriate */
.data-table .btn-icon.edit:hover { 
    color: var(--theme-color); /* Explicitly use theme-color for edit icon hover */
}
.data-table .btn-icon.delete:hover { 
    color: var(--color-danger-500); /* Retain danger color for delete icon hover */
}

[data-theme="dark"] .data-table {
  background: var(--surface-level-1);
}

[data-theme="dark"] .data-table th {
  background: var(--surface-level-2);
  color: var(--text-secondary-dark);
}

[data-theme="dark"] .data-table tbody tr:hover {
  background: var(--surface-overlay);
}

[data-theme="light"] .data-table {
  background: var(--surface-level-0);
  border: 1px solid rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .data-table th {
  background: var(--surface-level-2);
  color: var(--text-secondary-light);
  border-bottom: 1px solid rgba(0, 0, 0, 0.12);
}

[data-theme="light"] .data-table tbody tr:hover {
  background: var(--surface-overlay);
}

[data-theme="light"] .data-table td {
  border-bottom: 1px solid rgba(0, 0, 0, 0.06);
}


/* Amélioration de l'affichage des valeurs nulles/vides */
.data-table td:empty::after {
   content: "—"; /* Em dash for empty */
   color: var(--text-color-placeholder);
   font-style: italic;
}

/* Style pour les en-têtes triables */
.data-table th[style*="cursor: pointer"] { /* Target th elements that have inline style for cursor */
   user-select: none; /* Prevent text selection on click */
   position: relative; /* For positioning sort indicators */
   transition: background-color var(--transition-duration) var(--transition-timing-function);
}

.data-table th[style*="cursor: pointer"]:hover {
   background-color: var(--color-neutral-200); /* Slightly darker on hover */
}

/* Indicateurs de tri améliorés - Assuming sort indicators are spans with marginLeft */
.data-table th span[style*="marginLeft"] { /* Target span elements with inline style for marginLeft */
   margin-left: 4px; /* Space out indicator */
   display: inline-block; /* Ensure it takes space */
   opacity: 0.7; /* Default subdued opacity */
   transition: opacity var(--transition-duration) var(--transition-timing-function);
}

.data-table th:hover span[style*="marginLeft"] {
   opacity: 1; /* Full opacity on header hover */
}

/* Style pour "Non assigné" (ou similar styled text) */
.text-color-secondary[style*="fontStyle: italic"] { /* More specific if needed */
   background-color: var(--color-warning-50);
   padding: 2px 6px;
   border-radius: var(--border-radius-sm);
   font-size: 0.8rem;
   border: 1px solid var(--color-warning-200); /* Softer border */
   color: var(--color-warning-700); /* Darker warning text for better contrast */
}


/* ===== BARRE D'ACTIONS ET RECHERCHE ===== */
.actions-bar {
   display: flex;
   flex-wrap: wrap;
   justify-content: space-between;
   align-items: center;
   margin-bottom: var(--spacing-lg); /* Neo UI consistent (was --spacing-6) */
   gap: var(--spacing-md); /* Neo UI consistent (was --spacing-4) */
   padding: var(--spacing-md); /* Neo UI consistent (was --spacing-4) */
   background-color: var(--surface-tertiary); /* Neo UI surface */
   border-radius: var(--radius-lg); /* Neo UI radius */
   border: 1px solid var(--border-default); /* Neo UI border */
}

.search-container {
   flex-grow: 1;
   min-width: 250px;
}

.search-container .search-icon {
   position: absolute;
   left: var(--spacing-3);
   top: 50%;
   transform: translateY(-50%);
   pointer-events: none;
   color: var(--text-color-primary);
}

.search-input {
   width: 100%;
   padding: var(--spacing-2) var(--spacing-3);
   padding-left: var(--spacing-8);
   border: 1px solid var(--border-color-medium);
   border-radius: var(--border-radius-full);
   transition: box-shadow var(--transition-duration) var(--transition-timing-function), border-color var(--transition-duration) var(--transition-timing-function);
}
.search-input:focus {
   box-shadow: 0 0 0 3px var(--border-focus-ring);
   border-color: var(--color-primary-500);
}

.buttons-container {
   display: flex;
   flex-wrap: wrap;
   gap: var(--spacing-3);
}

/* ===== COLONNES CONFIGURABLES ===== */
.colonnes-picker {
   background: var(--surface-tertiary); /* Neo UI surface */
   border: 1px solid var(--border-default); /* Neo UI border */
   border-radius: var(--radius-lg); /* Neo UI radius */
   padding: var(--spacing-lg); /* Neo UI (24px), was --spacing-5 (20px) */
   margin-bottom: var(--spacing-lg); /* Neo UI (24px), was --spacing-6 (24px) */
   box-shadow: var(--shadow-sm); /* Consistent */
}
.colonnes-picker h4 {
   margin-top: 0;
   margin-bottom: var(--spacing-4);
   font-size: 1rem; /* 16px */
}

.colonnes-grid {
   display: grid;
   grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
   gap: var(--spacing-3);
}

.colonne-option label {
   display: flex;
   align-items: center;
   cursor: pointer;
   font-size: 0.875rem; /* 14px */
   padding: var(--spacing-2);
   border-radius: var(--border-radius-md);
   transition: background-color var(--transition-duration);
}
.colonne-option label:hover {
   background-color: var(--color-neutral-200);
}
.colonne-option input[type="checkbox"] {
   margin-right: var(--spacing-2);
}

/* ===== MODALES ET FICHES ===== */
.modal-overlay {
   position: fixed;
   inset: 0;
   background-color: rgba(15, 23, 42, 0.7);
   display: flex;
   justify-content: center;
   align-items: center;
   z-index: 1000;
   padding: var(--spacing-4);
   animation: fadeInModal 0.2s var(--transition-timing-function);
}

@keyframes fadeInModal {
   from { opacity: 0; }
   to { opacity: 1; }
}

.modal-content {
   background: var(--surface-secondary); /* Was --surface-color, now directly Neo var */
   border-radius: var(--radius-xl); /* Consistent */
   width: 100%;
   max-width: 900px;
   max-height: 90vh;
   overflow-y: auto;
   box-shadow: var(--shadow-xl); /* Consistent */
   border: 1px solid var(--border-default); /* Added Neo border */
   display: flex;
   flex-direction: column;
   animation: slideInUpModal 0.25s var(--transition-timing-function);
}

@keyframes slideInUpModal {
   from { transform: translateY(20px); opacity: 0; }
   to { transform: translateY(0); opacity: 1; }
}

.modal-content.moderne {
}

.loader-container {
   display: flex;
   flex-direction: column;
   justify-content: center;
   align-items: center;
   min-height: 200px;
   padding: var(--spacing-8);
}
.loader-container .loader::before {
   content: ""; display: block; width: 40px; height: 40px; border-radius: 50%;
   border: 4px solid var(--color-neutral-200);
   border-top-color: var(--color-primary-500);
   animation: spin 0.8s linear infinite;
}
.loader-container p {
   margin-top: var(--spacing-4);
   color: var(--text-color-secondary);
}

/* ===== FICHE INDIVIDU (DANS MODALE) ===== */
.fiche-individu {
   display: flex;
   flex-direction: column;
   flex-grow: 1;
}

.fiche-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   padding: var(--spacing-5) var(--spacing-6);
   background: var(--color-neutral-50);
   border-bottom: 1px solid var(--border-color-light);
   border-radius: var(--border-radius-xl) var(--border-radius-xl) 0 0;
}

.fiche-header h2 {
   margin: 0;
   color: var(--color-primary-600);
   font-size: 1.25rem; /* 20px */
}

.fiche-actions {
   display: flex;
   gap: var(--spacing-3);
}

.fiche-main-info {
   background-color: var(--color-neutral-50);
   padding: var(--spacing-4) var(--spacing-6);
   margin: var(--spacing-4) var(--spacing-6);
   border-radius: var(--border-radius-lg);
   border-left: 4px solid var(--color-primary-500);
   box-shadow: var(--shadow-xs);
}

.fiche-main-info .info-grid {
   display: grid;
   grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
   gap: var(--spacing-4);
}

.fiche-main-info .info-row {
   padding: 0;
   border: none;
}

.fiche-main-info .info-cell-label {
   font-size: 0.875rem; /* 14px */
   color: var(--text-color-secondary);
   margin-bottom: var(--spacing-1);
}

.fiche-main-info .info-cell-value {
   font-size: 1rem; /* 16px */
   font-weight: 500;
   color: var(--text-color-primary);
}
.fiche-main-info .highlight {
   color: var(--color-primary-600);
   font-weight: 600;
}

.fiche-tabs {
   display: flex;
   flex-wrap: nowrap;
   overflow-x: auto;
   padding: 0 var(--spacing-4);
   border-bottom: 1px solid var(--border-color-light);
   margin-bottom: var(--spacing-4);
   gap: var(--spacing-1);
   scrollbar-width: thin;
   scrollbar-color: var(--color-neutral-300) transparent;
}
.fiche-tabs::-webkit-scrollbar {
   height: 6px;
}
.fiche-tabs::-webkit-scrollbar-thumb {
   background-color: var(--color-neutral-300);
   border-radius: var(--border-radius-full);
}

.fiche-tabs button {
   display: inline-flex; align-items: center; justify-content: center; 
   padding: var(--spacing-sm) var(--spacing-md); /* 8px 16px, consistent with view-mode-selector */
   font-size: 0.875rem; 
   font-weight: 600; /* Consistent with .btn-base */
   border: none; /* No side borders */
   cursor: pointer; 
   transition: all var(--transition-fast);
   text-decoration: none; white-space: nowrap;
   background-color: transparent; 
   color: var(--text-secondary); /* Default color */
   border-radius: var(--radius-md) var(--radius-md) 0 0; /* Neo radius */
   border-bottom: 2px solid transparent; /* Underline for active state */
   text-transform: none; /* Tabs usually not uppercase */
   letter-spacing: normal;
}
.fiche-tabs button:hover:not(:disabled) {
   color: var(--theme-color); /* Themed text on hover */
   background-color: rgba(var(--theme-color-rgb), 0.1); /* Subtle themed background on hover */
}
.fiche-tabs button.active {
   color: var(--theme-color); /* Themed text for active */
   border-bottom-color: var(--theme-color); /* Themed underline for active */
   background-color: rgba(var(--theme-color-rgb), 0.1); /* Subtle themed background for active */
   font-weight: 600; /* Keep bold for active */
}
.fiche-tabs button:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.fiche-tabs button:disabled { opacity: 0.6; cursor: not-allowed; }


.fiche-content-wrapper {
   padding: 0 var(--spacing-6) var(--spacing-6);
   flex-grow: 1;
   overflow-y: auto;
}

.fiche-content {
   background-color: var(--surface-color);
   border-radius: var(--border-radius-lg);
   margin-bottom: var(--spacing-4);
   animation: fadeInContent 0.3s ease;
}
@keyframes fadeInContent {
   from { opacity: 0; }
   to { opacity: 1; }
}


.fiche-content h3 {
   margin: 0;
   padding: var(--spacing-4);
   background-color: var(--color-neutral-100);
   border-bottom: 1px solid var(--border-color-light);
   color: var(--text-color-primary);
   font-size: 1rem; /* 16px */
   font-weight: 600;
   border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
}

.fiche-content .info-grid {
   padding: var(--spacing-4);
   display: grid;
   grid-template-columns: auto 1fr;
   gap: var(--spacing-4) var(--spacing-3);
   align-items: center;
}

.fiche-content .info-cell-label {
   font-weight: 500;
   color: var(--text-color-secondary);
   padding-right: var(--spacing-4);
   font-size: 0.875rem; /* 14px */
}

.fiche-content .info-cell-value input,
.fiche-content .info-cell-value select,
.fiche-content .info-cell-value textarea {
   margin-bottom: 0;
}

.no-fields-message, .no-audit-message, .no-categories-message {
   padding: var(--spacing-6);
   text-align: center;
   color: var(--text-color-secondary);
   font-style: italic;
   background-color: var(--color-neutral-50);
   border-radius: var(--border-radius-lg);
}

/* ===== ADMINISTRATION DES CATÉGORIES (Anciens styles,   fusionner/vérifier) ===== */
.category-form {
   background-color: var(--color-neutral-100);
   border-radius: var(--border-radius-lg);
   padding: var(--spacing-6);
   margin-bottom: var(--spacing-8);
   box-shadow: var(--shadow-md);
}
.category-form h3, .category-form h4 {
   margin-top: 0;
}

.champ-form {
   background-color: var(--surface-color);
   border: 1px solid var(--border-color-light);
   border-radius: var(--border-radius-md);
   padding: var(--spacing-4);
   margin-bottom: var(--spacing-4);
   box-shadow: var(--shadow-sm);
}

.form-row {
   display: flex;
   flex-wrap: wrap;
   gap: var(--spacing-4);
   margin-bottom: var(--spacing-3);
   align-items: flex-end;
}
.form-row > * {
   flex: 1;
   min-width: 150px;
}
.form-row > label {
   flex-grow: 0;
   align-self: center;
   margin-bottom: 0;
}
.form-row button {
   flex-grow: 0;
   align-self: center;
}

.categories-masquees-section {
   margin-top: var(--spacing-8);
   border-top: 1px solid var(--border-color-medium);
   padding-top: var(--spacing-6);
}

.header-with-action {
   display: flex;
   justify-content: space-between;
   align-items: center;
   margin-bottom: var(--spacing-4);
}


/* ===== CARTES DE STATISTIQUES (DASHBOARD) ===== */
.stats-container {
   display: grid;
   grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Responsive */
   gap: var(--spacing-4);
   margin-top: var(--spacing-4);
}

.stats-card, .user-info-card { /* Aligned with Neo UI .card */
   display: flex;
   flex-direction: column;
   height: 100%;
   background-color: var(--surface-card); /* Neo UI */
   border: 1px solid var(--border-subtle); /* Neo UI */
   border-radius: var(--radius-lg); /* Neo UI (12px), app.css --border-radius-lg is 0.75rem (12px) - consistent */
   padding: var(--spacing-lg); /* Neo UI (24px), was var(--spacing-4) (16px) */
   box-shadow: var(--shadow-md); /* Aliased to Neo UI shadow */
   transition: all var(--transition-normal); /* Neo UI */
   position: relative; /* For ::before pseudo-element if added */
   overflow: hidden; /* For ::before pseudo-element if added */
}
.stats-card:hover, .user-info-card:hover {
   transform: translateY(-2px); /* Neo UI */
   box-shadow: var(--shadow-lg), var(--shadow-glow); /* Neo UI */
   border-color: var(--border-default); /* Neo UI */
}

.stats-card h3, .user-info-card h3 {
   color: var(--text-color-primary);
   font-size: 1rem; /* 16px */
   margin-top: 0;
   margin-bottom: var(--spacing-3);
   padding-bottom: var(--spacing-2);
   border-bottom: 1px solid var(--border-color-light);
}

.stat-item, .user-info-item {
   display: flex;
   justify-content: space-between;
   align-items: center;
   padding: var(--spacing-3) 0;
   border-bottom: 1px solid var(--border-color-light);
   font-size: 0.875rem; /* 14px */
}
.stat-item:last-child, .user-info-item:last-child {
   border-bottom: none;
}

.stat-label, .user-info-label {
   color: var(--text-color-secondary);
}

.stat-value, .user-info-value {
   font-weight: 600;
   color: var(--color-primary-600);
   font-size: 1rem; /* 16px */
}

[data-theme="dark"] .stats-card,
[data-theme="dark"] .user-info-card,
[data-theme="dark"] .card {
  background: var(--surface-level-1);
  border: 1px solid rgba(255, 255, 255, 0.08);
  color: var(--text-primary-dark);
}

[data-theme="dark"] .stats-card:hover {
  background: var(--surface-level-2);
  border-color: rgba(255, 255, 255, 0.12);
}

[data-theme="dark"] .card h3,
[data-theme="dark"] .stats-card .stat-label {
  color: var(--text-secondary-dark);
}

[data-theme="dark"] .stat-value {
  color: var(--theme-color-light);
  text-shadow: 0 0 20px rgba(var(--theme-color-rgb), 0.3);
}

[data-theme="light"] .stats-card,
[data-theme="light"] .user-info-card,
[data-theme="light"] .card {
  background: var(--surface-level-1);
  border: 1px solid rgba(0, 0, 0, 0.08);
  color: var(--text-primary-light);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

[data-theme="light"] .stats-card:hover {
  background: var(--surface-level-2);
  border-color: rgba(0, 0, 0, 0.12);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

[data-theme="light"] .card h3,
[data-theme="light"] .stats-card .stat-label {
  color: var(--text-secondary-light);
}

[data-theme="light"] .stat-value {
  color: var(--theme-color);
  text-shadow: none;
}

/* ===== ÉCRAN DE CONNEXION (Auth.jsx) ===== */
.auth-container {
   display: flex;
   justify-content: center;
   align-items: center;
   min-height: 100vh;
   background-color: var(--color-neutral-100);
   padding: var(--spacing-4);
}

.auth-form {
   background: var(--surface-color);
   border-radius: var(--border-radius-xl);
   box-shadow: var(--shadow-lg);
   padding: var(--spacing-8) var(--spacing-6);
   width: 100%;
   max-width: 420px;
   text-align: center;
}

.auth-form h2 {
   margin-bottom: var(--spacing-6);
   color: var(--color-primary-600);
   font-size: 1.75rem; /* 28px */
}

.auth-form input[type="text"],
.auth-form input[type="password"] {
   margin-bottom: 0; /* spacing handled by .form-group */
   text-align: left;
}

.auth-form .form-actions {
   margin-top: var(--spacing-5);
   display: flex;
   flex-direction: column;
   gap: var(--spacing-3);
}
@media (min-width: 400px) {
   .auth-form .form-actions {
      flex-direction: row;
   }
}

.auth-form .form-actions button {
   width: 100%;
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-2) var(--spacing-4); font-size: 0.875rem; font-weight: 500; border-radius: var(--border-radius-md); border: 1px solid transparent; cursor: pointer; transition-property: background-color, border-color, color, box-shadow; transition-duration: var(--transition-duration); transition-timing-function: var(--transition-timing-function); text-decoration: none; white-space: nowrap;
   background-color: var(--surface-color); color: var(--color-primary-600); border-color: var(--color-primary-500);
}
.auth-form .form-actions button:hover:not(:disabled) { background-color: var(--color-primary-50); border-color: var(--color-primary-600); }
.auth-form .form-actions button:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.auth-form .form-actions button:disabled { opacity: 0.6; cursor: not-allowed; }


.auth-form .error, .auth-form .success, .auth-form .warning {
   text-align: left;
   margin-top: var(--spacing-4);
   font-size: 0.875rem; /* 14px */
}
.auth-form .error p, .auth-form .success p, .auth-form .warning p {
   margin-bottom: 0;
}

.auth-form .login-info {
   margin-top: var(--spacing-6);
   font-size: 0.75rem; /* 12px */
   color: var(--text-color-secondary);
   text-align: left;
}


/* Styles spécifiques pour les composants React (si nécessaire) */
/* Style pour les sélecteurs de vue */
.view-mode-selector {
   display: flex;
   gap: var(--spacing-1);
   background-color: var(--color-neutral-100);
   padding: var(--spacing-1);
   border-radius: var(--border-radius-md);
   width: fit-content;
   margin-bottom: var(--spacing-5); /* Kept from original if still needed, can be removed if actions-bar handles spacing */
}

.view-mode-selector button {
   padding: var(--spacing-sm) var(--spacing-md); /* Adjusted padding: 8px 16px */
   border-radius: var(--radius-md); /* Consistent with Neo: 8px */
   border: none;
   background-color: transparent;
   color: var(--text-secondary); /* Aligned with Neo ghost/tertiary text */
   font-weight: 600; /* Aligned with .btn-base */
   font-size: 0.875rem;
   cursor: pointer;
   transition: all var(--transition-fast); /* Use Neo transition */
   white-space: nowrap;
   text-transform: none; /* No uppercase for view toggles */
   letter-spacing: normal; /* Reset from potential .btn-base inheritance */
}

.view-mode-selector button:hover:not(.active-view-button):not(:disabled) { 
   background-color: rgba(255, 255, 255, 0.05); /* Neo ghost hover */
   color: var(--text-primary); /* Neo ghost hover text */
}

.view-mode-selector button.active-view-button {
   background-color: var(--theme-color); /* Active state like a primary button */
   color: var(--text-on-theme);
   box-shadow: var(--shadow-sm); 
}

.view-mode-selector button.active-view-button:hover:not(:disabled) { 
   background-color: var(--theme-color-dark); /* Darken themed active button on hover */
}
.view-mode-selector button:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.view-mode-selector button:disabled { opacity: 0.6; cursor: not-allowed; }


/* Styles pour les inputs d'actions dans UserSettings.jsx */
.input-action {
   display: flex;
   gap: var(--spacing-3);
   align-items: center;
}
.input-action input {
   flex-grow: 1;
}
.input-action button { /* Aligned with new .btn-primary */
   flex-shrink: 0;
   display: inline-flex; align-items: center; justify-content: center; padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; border-radius: var(--radius-md); border: none; cursor: pointer; transition: all var(--transition-fast); text-decoration: none; white-space: nowrap; letter-spacing: 0.05em; text-transform: uppercase; position: relative; overflow: hidden;
   background-color: var(--theme-color);
   color: var(--text-on-theme);
}
.input-action button:hover:not(:disabled) {
   background-color: var(--theme-color-dark);
   transform: translateY(-1px);
   box-shadow: var(--shadow-md);
}
.input-action button:focus-visible { outline: 2px solid transparent; outline-offset: 2px; box-shadow: 0 0 0 3px var(--border-focus-ring); }
.input-action button:disabled { opacity: 0.6; cursor: not-allowed; }

/* Styles pour les composants Wizard */

/* Structure générale des wizards */
.import-wizard, /* Classe pour ImportData */
.admin-panel { /* Classe générique pour les panneaux d'administration */
   background-color: var(--surface-secondary); /* Was --surface-color, now directly using Neo var if different */
   padding: var(--spacing-lg); /* Was --spacing-6 (24px), consistent with Neo's lg */
   border-radius: var(--radius-lg); /* Neo var, consistent with app's --border-radius-lg */
   box-shadow: var(--shadow-md); /* Aliased to Neo var */
   margin-bottom: var(--spacing-xl); /* Neo var (32px), was --spacing-8 */
   border: 1px solid var(--border-default); /* Added Neo border */
   /* overflow-x: hidden; */ 
}
.import-wizard {
   width: 100%;
}

.import-wizard .panel-title, /* Titre dans ImportData */
.admin-panel .panel-title { /* Titre générique pour AdminPanel */
   font-size: 1.75rem; /* 28px */
   color: var(--color-primary-600);
   margin-top: 0;
   margin-bottom: var(--spacing-6);
   padding-bottom: var(--spacing-4);
   border-bottom: 1px solid var(--border-color-light);
}

/* Spécifique   la gestion des utilisateurs */
.user-management-panel .user-form {
   background-color: var(--color-neutral-50);
   border: 1px solid var(--border-color-light);
   border-radius: var(--border-radius-lg);
   padding: var(--spacing-5);
   margin-bottom: var(--spacing-8);
   box-shadow: var(--shadow-sm);
}

.user-management-panel .user-form h3 {
   margin-top: 0;
   margin-bottom: var(--spacing-4);
   color: var(--color-primary-600);
}

/* Spécifique   la gestion des rôles */
.role-management-panel .role-form {
   background-color: var(--color-neutral-50);
   border: 1px solid var(--border-color-light);
   border-radius: var(--border-radius-lg);
   padding: var(--spacing-5);
   margin-bottom: var(--spacing-8);
   box-shadow: var(--shadow-sm);
}

.role-management-panel .role-form h3 {
   margin-top: 0;
   margin-bottom: var(--spacing-4);
   color: var(--color-primary-600);
}

.role-management-panel .permissions-grid {
   display: flex;
   flex-wrap: wrap;
   gap: var(--spacing-3);
   margin-top: var(--spacing-3);
}

.role-management-panel .permissions-grid label {
   display: flex;
   align-items: center;
   gap: var(--spacing-1);
}


/* Étapes du wizard */
.wizard-steps {
   display: flex;
   flex-wrap: wrap;
   justify-content: space-around; /* Mieux réparti */
   margin-bottom: var(--spacing-6);
   padding-bottom: var(--spacing-4);
   border-bottom: 1px solid var(--border-color-light);
   gap: var(--spacing-2);
}

.wizard-step {
   flex: 1;
   text-align: center;
   padding: var(--spacing-2) var(--spacing-1);
   position: relative;
   color: var(--text-color-secondary);
   font-weight: 500;
   border-bottom: 3px solid transparent;
   transition: color var(--transition-duration), border-color var(--transition-duration);
   cursor: default; /* Non cliquable par défaut */
}
.wizard-step .step-number {
   display: inline-block;
   width: 24px;
   height: 24px;
   line-height: 22px; /* Ajusté pour centrage vertical */
   border-radius: 50%;
   background-color: var(--color-neutral-200);
   color: var(--text-color-secondary);
   margin-right: var(--spacing-2);
   font-weight: bold;
   border: 1px solid var(--color-neutral-300);
}
.wizard-step .step-label {
      font-size: 0.875rem;
}

.wizard-step.active {
   color: var(--color-primary-600);
   border-bottom-color: var(--color-primary-500);
   font-weight: 600;
}
.wizard-step.active .step-number {
   background-color: var(--color-primary-500);
   color: var(--text-color-on-primary);
   border-color: var(--color-primary-600);
}

.wizard-step.completed {
   color: var(--color-success-700);
}
.wizard-step.completed .step-number {
   background-color: var(--color-success-500);
   color: var(--text-color-on-primary);
   border-color: var(--color-success-600);
}
.wizard-step.completed .step-label::before {
      content: "✓ "; /* Indicateur de complétion */
}

.wizard-step.disabled { /* Nouvelle classe pour les étapes non accessibles */
      color: var(--color-neutral-400);
      cursor: not-allowed;
}
.wizard-step.disabled .step-number {
      background-color: var(--color-neutral-100);
      border-color: var(--color-neutral-200);
      color: var(--color-neutral-400);
}


/* Contenu du wizard */
.wizard-content {
   padding-top: var(--spacing-4);
}

.wizard-panel-content { /* Conteneur pour le contenu de chaque étape */
   animation: fadeInContent 0.3s ease-out;
   /* overflow-x: hidden; */ /* MODIFICATION: Commenté pour permettre le défilement des enfants */
}


/* Actions du wizard */
.wizard-actions { /* Déj  défini, vérifier la cohérence */
   display: flex;
   justify-content: flex-end;
   gap: var(--spacing-3);
   margin-top: var(--spacing-6);
   padding-top: var(--spacing-4);
   border-top: 1px solid var(--border-color-light);
}

/* Styles spécifiques   l'import (nouveaux et existants fusionnés/ajustés) */
.import-wizard .preview-container {
   width: 100%;
   margin: var(--spacing-4) 0;
   border: 1px solid var(--border-color-medium);
   border-radius: var(--border-radius-md);
   padding: var(--spacing-3);
   background-color: var(--color-neutral-50);
}
.import-wizard .preview-container h4 {
   margin-top: 0;
   margin-bottom: var(--spacing-3);
   font-size: 1rem;
   color: var(--text-color-primary);
}

.import-wizard .preview-table-container { /* Ce conteneur doit permettre le défilement */
   width: 100%;
   overflow-x: auto !important; /* Important pour s'assurer qu'il défile */
   overflow-y: hidden !important; /* Empêche le défilement vertical ici */
   border: 1px solid var(--border-color-light);
   border-radius: var(--border-radius-sm);
   scrollbar-width: thin;
   scrollbar-color: var(--color-neutral-300) transparent;
   display: block; /* S'assurer que le conteneur se comporte comme un bloc */
}

.import-wizard .preview-table-container::-webkit-scrollbar {
   height: 8px;
   width: 8px; /* Ajouté pour une meilleure visibilité si nécessaire */
}

.import-wizard .preview-table-container::-webkit-scrollbar-thumb {
   background-color: var(--color-primary-300);
   border-radius: var(--border-radius-full);
}

.import-wizard .preview-table-container::-webkit-scrollbar-track {
   background: var(--color-neutral-100);
   border-radius: var(--border-radius-full);
}

.import-wizard .preview-table { /* La table elle-même doit pouvoir dépasser */
   width: max-content !important; /* Permet   la table de s'étendre autant que son contenu */
   min-width: 100%; /* Au moins la largeur de son conteneur */
   white-space: nowrap; /* Empêche le retour   la ligne dans les cellules */
   table-layout: auto; /* Laisser le navigateur déterminer la largeur des colonnes */
   border-collapse: collapse;
   font-size: 0.9em;
   margin-bottom: 0; /* Important si le conteneur a un padding pour la scrollbar */
}
.import-wizard .preview-table th,
.import-wizard .preview-table td {
   border: 1px solid var(--border-color-medium);
   padding: var(--spacing-2);
   white-space: nowrap; /* Redondant mais ne nuit pas */
   overflow: hidden; /* Pour le text-overflow ellipsis dans la cellule */
   text-overflow: ellipsis;
   max-width: 250px; /* Augmenté légèrement, ajuster si besoin */
   /* min-width: 100px; */ /* Ajouter un min-width si certaines colonnes doivent être plus larges */
}
.import-wizard .preview-table th {
   background-color: var(--color-neutral-100);
   position: sticky; /* En-têtes flottants */
   top: 0;
   z-index: 2; /* Au-dessus du contenu de la table mais en dessous d'autres éléments sticky potentiels */
}

.template-section {
   display: flex;
   flex-direction: column;
   gap: var(--spacing-4);
}


.import-wizard .data-table { /* S'applique aussi   .preview-table via la cascade */
   /* width: max-content !important; */ /* Déj  défini pour .preview-table */
   /* min-width: 100%; */   /* Déj  défini pour .preview-table */
}
.mapping-form-container {
   margin-top: var(--spacing-5);
   width: 100%;
   /* overflow-x: hidden; */ /* Potentiellement problématique si le contenu interne est large */
}
.mapping-form-container h4 {
      margin-bottom: var(--spacing-4);
      font-size: 1.1rem;
}

.mapping-field-row {
   display: flex;
   flex-wrap: wrap;
   gap: var(--spacing-4);
   border: 1px solid var(--border-color-medium); /* #ddd */
   border-radius: var(--border-radius-md); /* 4px */
   padding: var(--spacing-4); /* 15px */
   margin-bottom: var(--spacing-4); /* 15px */
   background-color: var(--surface-color);
   box-shadow: var(--shadow-xs);
}
.mapping-field-row .mapping-source label {
      font-weight: 600;
      color: var(--text-color-primary);
      margin-bottom: var(--spacing-2); /* Ajouter un peu d'espace */
}
.mapping-field-row .mapping-source,
.mapping-field-row .mapping-options,
.mapping-field-row .special-mapping {
   flex: 1 1 240px;
   min-width: 200px;
}

.special-field-row {
   background-color: var(--color-neutral-50); /* #f8f9fa */
   border-left: 4px solid var(--color-success-500); /* #28a745, épaisseur augmentée */
   padding-left: calc(var(--spacing-4) - 4px); /* ajuster le padding pour compenser la bordure */
}
.special-field-row .special-mapping p {
      margin-bottom: 0;
      color: var(--color-success-700);
}
.special-field-row .special-mapping .help-text {
      font-size: 0.8rem;
      color: var(--text-color-secondary);
      margin-top: var(--spacing-1);
}


.mapping-options {
   margin-top: var(--spacing-3);
   padding-top: var(--spacing-3);
   border-top: 1px dashed var(--border-color-light);
}
.mapping-options .form-group > label { /* Label pour "Action pour cette colonne", "Champ de destination", etc. */
      font-weight: 500;
      margin-bottom: var(--spacing-2);
}


.radio-group {
   display: flex;
   flex-direction: column;
   gap: var(--spacing-2); /* 8px */
   margin-bottom: var(--spacing-3); /* 10px */
}

.radio-group label {
   display: flex;
   align-items: center;
   gap: var(--spacing-2);
   cursor: pointer;
   font-weight: normal;
   padding: var(--spacing-1) 0;
}
.radio-group input[type="radio"] {
      margin: 0;
      flex-shrink: 0; /* Empêche le radio de rétrécir */
}

.nouveau-champ-config {
   margin-top: var(--spacing-3); /* 12px */
   padding: var(--spacing-3); /* 12px */
   background-color: var(--color-neutral-100); /* #f8f9fa */
   border-radius: var(--border-radius-md);
   border: 1px solid var(--border-color-light);
}
.nouveau-champ-config h5 { /* Titre "Configuration du nouveau champ" */
      font-size: 1rem;
      color: var(--text-color-primary);
      margin-top: 0;
      margin-bottom: var(--spacing-3);
      padding-bottom: var(--spacing-2);
      border-bottom: 1px solid var(--border-color-light);
}
.nouveau-champ-config .form-group {
      margin-bottom: var(--spacing-3);
}

.champ-options-checkboxes {
   display: flex;
   flex-wrap: wrap;
   gap: var(--spacing-4); /* 15px */
   margin-top: var(--spacing-3);
}
.champ-options-checkboxes label {
      font-weight: normal;
}

.help-text {
   font-size: 0.85em;
   color: var(--text-color-secondary);
   margin-top: var(--spacing-1);
   display: block;
}
.help-text.important {
   background-color: var(--color-neutral-50); /* #f8f9fa */
   border-left: 4px solid var(--color-info); /* #17a2b8, épaisseur augmentée */
   padding: var(--spacing-3); /* 10px */
   margin: var(--spacing-3) 0; /* 10px 0 */
   border-radius: 0 var(--border-radius-md) var(--border-radius-md) 0;
   color: var(--color-info); /* Texte en accord avec la bordure */
}


.file-input.stylish-input { /* Assurer que les styles de stylish-input s'appliquent */
   /* Hérite de input[type="file"] et .stylish-input (si défini ailleurs) */
}

.import-results {
      text-align: center;
      padding: var(--spacing-6) var(--spacing-4);
}
.import-results h3 {
      color: var(--color-success-700);
      margin-bottom: var(--spacing-5);
}


/* Responsive design pour Wizard (compléments) */
@media (max-width: 768px) {
   .wizard-steps {
      flex-direction: column;
      gap: var(--spacing-1);
      align-items: stretch;
   }
   .wizard-step {
         text-align: left;
         padding-left: var(--spacing-2);
         border-bottom: 1px dashed var(--border-color-light);
   }
     .wizard-step:last-child {
           border-bottom: none;
     }
   .wizard-step:not(:last-child)::after {
      display: none;
   }

   .nouveau-champ-config .form-grid {
         grid-template-columns: 1fr;
   }
}

/* Fin des styles pour ImportData */


/* Styles pour MassAttribution (hérités et spécifiques) */
.mass-attribution-wizard {
   /* Utilise .admin-panel pour le style de base */
   /* overflow-x: hidden; */ /* MODIFICATION: Commenté */
}

/* Panneau des filtres pour MassAttribution */
.filters-panel {
   background-color: var(--surface-tertiary); /* Changed from --color-neutral-50 */
   border: 1px solid var(--border-default); /* Changed from --border-color-light */
   border-radius: var(--radius-lg); /* Consistent */
   padding: var(--spacing-lg); /* Was --spacing-5 (20px), now 24px */
   box-shadow: var(--shadow-sm); /* Consistent */
   margin-bottom: var(--spacing-lg); /* Was --spacing-5 (20px), now 24px */
}

@media (min-width: 992px) {
   .mass-attribution-wizard .wizard-panel-content {
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      gap: var(--spacing-6);
   }
   .filters-panel {
      flex: 0 0 320px;
      position: sticky;
      top: var(--spacing-4);
      max-height: calc(100vh - (var(--spacing-4) * 2));
      overflow-y: auto;
      margin-bottom: 0;
   }
   .selection-panel {
      flex: 1;
      min-width: 0;
   }
}


.filters-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   margin-bottom: var(--spacing-4);
   padding-bottom: var(--spacing-3);
   border-bottom: 1px solid var(--border-color-light);
}

.filters-header h3 {
   margin: 0;
   font-size: 1.25rem;
   color: var(--text-color-primary);
}

.btn-reset-filters {
   padding: var(--spacing-1) var(--spacing-3);
   font-size: 0.8rem;
}

.filter-mode-selector {
   margin-bottom: var(--spacing-4);
   padding-bottom: var(--spacing-4);
   border-bottom: 1px solid var(--border-color-light);
}
.filter-mode-selector > label {
      font-weight: 600;
      margin-bottom: var(--spacing-2);
      display: block;
      color: var(--text-color-primary);
}

.filter-mode-options {
   display: flex;
   gap: var(--spacing-4);
   margin-top: var(--spacing-2);
}
.filter-mode-options label {
      font-weight: normal;
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      cursor: pointer;
}


/* Créateur de filtres de champs */
.field-filter-creator {
   margin-top: var(--spacing-5);
   padding: var(--spacing-4);
   background-color: var(--color-neutral-100);
   border: 1px solid var(--border-color-light);
   border-radius: var(--border-radius-md);
}

.field-filter-creator h4 {
   margin-top: 0;
   margin-bottom: var(--spacing-3);
   font-size: 1.1rem;
}

.filter-form {
   display: flex;
   flex-direction: column;
   gap: var(--spacing-3);
}

.filter-field-select,
.filter-operator-select,
.filter-value-input {
   display: flex;
   flex-direction: column;
   gap: var(--spacing-1);
}
.filter-field-select label,
.filter-operator-select label,
.filter-value-input label {
      font-size: 0.875rem;
      font-weight: 500;
      margin-bottom: var(--spacing-1);
}


.btn-add-filter {
   margin-top: var(--spacing-2);
   align-self: flex-start;
}


/* Filtres actifs */
.active-field-filters {
   margin-top: var(--spacing-5);
}

.active-field-filters h4 {
   margin-top: 0;
   margin-bottom: var(--spacing-3);
   font-size: 1.1rem;
}

.active-field-filters ul {
   list-style: none;
   padding: 0;
   margin: 0;
   display: flex;
   flex-direction: column;
   gap: var(--spacing-2);
}

.field-filter-item {
   background-color: var(--color-primary-50);
   padding: var(--spacing-2) var(--spacing-3);
   border-radius: var(--border-radius-md);
   display: flex;
   justify-content: space-between;
   align-items: center;
   border: 1px solid var(--color-primary-100);
   font-size: 0.875rem;
}

.field-filter-info {
   flex: 1;
   color: var(--text-color-primary);
}

.field-filter-info .filter-value {
   font-weight: 600;
   color: var(--color-primary-600);
   margin-left: var(--spacing-1);
}

.btn-remove-filter {
   background: none;
   border: none;
   color: var(--color-danger-500);
   font-size: 1.25em;
   cursor: pointer;
   padding: 0 var(--spacing-1);
   line-height: 1;
}
.btn-remove-filter:hover {
      color: var(--color-danger-700);
}


/* Panneau de sélection (droite) */
.selection-panel {
   display: flex;
   flex-direction: column;
   gap: var(--spacing-5);
}

/* Stats Panel dans MassAttribution */
.mass-attribution-wizard .stats-panel {
   display: flex;
   flex-wrap: wrap;
   gap: var(--spacing-3);
   margin-bottom: var(--spacing-4);
   background-color: var(--surface-color);
   padding: var(--spacing-4);
   border-radius: var(--border-radius-lg);
   border: 1px solid var(--current-border-medium);
   justify-content: space-around;
}
[data-theme="dark"] .mass-attribution-wizard .stats-panel {
   background-color: var(--current-surface-color-dp01);
}

.mass-attribution-wizard .stats-item {
   display: flex;
   flex-direction: column;
   align-items: center;
   justify-content: center;
   min-width: 100px;
   padding: var(--spacing-3);
   background-color: var(--surface-color);
   border-radius: var(--border-radius-md);
   box-shadow: var(--shadow-xs);
   text-align: center;
   flex-grow: 1;
}

.mass-attribution-wizard .stats-label {
   font-weight: 500;
   color: var(--text-color-secondary);
   font-size: 0.8rem;
   margin-bottom: var(--spacing-1);
   text-transform: uppercase;
}

.mass-attribution-wizard .stats-value {
   font-weight: 700;
   color: var(--text-color-primary);
   font-size: 1.5rem;
}

.mass-attribution-wizard .stats-item.highlight {
   background-color: var(--color-primary-50);
   border: 1px solid var(--color-primary-200);
}
[data-theme="dark"] .mass-attribution-wizard .stats-item.highlight {
   background-color: rgba(var(--theme-color-rgb), 0.15);
   border-color: var(--current-primary-color);
}
.mass-attribution-wizard .stats-item.highlight .stats-value {
   color: var(--color-primary-600);
}
[data-theme="dark"] .mass-attribution-wizard .stats-item.highlight .stats-value {
   color: var(--current-primary-color);
}


/* Sélection des individus Table */
.mass-attribution-wizard .individus-selection {
   border: 1px solid var(--border-color-medium);
   border-radius: var(--border-radius-lg);
   overflow: hidden; /* Important pour que le border-radius s'applique au contenu qui défile */
   background-color: var(--surface-color);
   box-shadow: var(--shadow-md);
}

.mass-attribution-wizard .table-header {
   background-color: var(--color-neutral-100);
   padding: var(--spacing-3) var(--spacing-4);
   border-bottom: 1px solid var(--border-color-medium);
   display: flex;
   justify-content: space-between;
   align-items: center;
}
.mass-attribution-wizard .table-header h4 {
      margin: 0;
      font-size: 1.1rem;
}

.mass-attribution-wizard .select-all {
   display: flex;
   align-items: center;
   gap: var(--spacing-2);
   cursor: pointer;
   font-size: 0.875rem;
   font-weight: 500;
}
.mass-attribution-wizard .select-all input[type="checkbox"] {
      margin: 0;
}


.mass-attribution-wizard .individus-table-container { /* Conteneur pour le tableau avec défilement */
   max-height: 450px;
   overflow-y: auto; /* Défilement vertical pour la liste */
   overflow-x: auto; /* Défilement horizontal pour le tableau lui-même si plus large */
}

.mass-attribution-wizard .individus-table { /* This will inherit .data-table styles */
   width: 100%;
}

.mass-attribution-wizard .individus-table th,
.mass-attribution-wizard .individus-table td {
   /* Hérite de .data-table th, td */
   white-space: nowrap;
}

.mass-attribution-wizard .individus-table th {
   position: sticky;
   top: 0;
   z-index: 1; /* Should be lower than .data-table th z-index if nested, or same if replacing */
   background-color: var(--color-neutral-50);
}

.mass-attribution-wizard .individus-table tr.selected-row {
   background-color: var(--color-primary-100) !important;
}
.mass-attribution-wizard .individus-table tr.selected-row td {
      color: var(--color-primary-700);
      font-weight: 600;
}


.mass-attribution-wizard .individus-table tr:hover:not(.selected-row) {
   /* Hérite de .data-table tr:hover */
}

.mass-attribution-wizard td.unassigned {
   color: var(--color-danger-600);
   font-style: italic;
   font-weight: 500;
}

.mass-attribution-wizard .no-results {
   padding: var(--spacing-8) var(--spacing-4);
   text-align: center;
   color: var(--text-color-secondary);
   display: flex;
   flex-direction: column;
   align-items: center;
   gap: var(--spacing-3);
   font-size: 1rem;
   background-color: var(--color-neutral-50);
   border-top: 1px solid var(--border-color-light);
}
.mass-attribution-wizard .no-results::before {
      content: '🤷';
      font-size: 2.5rem;
      margin-bottom: var(--spacing-2);
      opacity: 0.7;
}


/* Étape d'attribution Formulaire */
.mass-attribution-wizard .attribution-form {
   max-width: 500px;
   margin: 0 auto;
   padding: var(--spacing-6);
   background-color: var(--color-neutral-50);
   border-radius: var(--border-radius-lg);
   border: 1px solid var(--border-color-light);
   box-shadow: var(--shadow-md);
}
.mass-attribution-wizard .attribution-form h3 {
      margin-top: 0;
      margin-bottom: var(--spacing-5);
      text-align: center;
      color: var(--color-primary-600);
}

.mass-attribution-wizard .attribution-form .form-group {
   margin-bottom: var(--spacing-5);
}

.mass-attribution-wizard .attribution-form label {
   font-weight: 600;
}

.mass-attribution-wizard .unassign-option {
   font-style: italic;
   color: var(--color-danger-600);
}
.mass-attribution-wizard .unassign-option::before {
      content: " ️ ";
}


.mass-attribution-wizard .selected-summary {
   margin-top: var(--spacing-5);
   padding: var(--spacing-4);
   background-color: var(--color-primary-50);
   border-radius: var(--border-radius-md);
   border: 1px solid var(--color-primary-200);
}

.mass-attribution-wizard .selected-summary h4 {
   margin-top: 0;
   margin-bottom: var(--spacing-2);
   color: var(--color-primary-700);
   font-size: 1.1rem;
}
.mass-attribution-wizard .selected-summary p {
      margin-bottom: 0;
      color: var(--text-color-primary);
      font-size: 0.9rem;
}


.mass-attribution-wizard .attribution-target {
   margin-top: var(--spacing-5);
   padding-top: var(--spacing-4);
   border-top: 1px dashed var(--border-color-medium);
}
.mass-attribution-wizard .attribution-target p {
      font-size: 0.9rem;
      color: var(--text-color-secondary);
}
.mass-attribution-wizard .attribution-target strong {
      color: var(--text-color-primary);
      font-weight: 600;
}


/* Confirmation Step */
.mass-attribution-wizard .confirmation {
   text-align: center;
   padding: var(--spacing-8) var(--spacing-4);
}

.mass-attribution-wizard .confirmation h3 {
   margin-bottom: var(--spacing-4);
   color: var(--color-primary-700);
   font-size: 1.75rem;
}
.mass-attribution-wizard .confirmation .success-message {
   font-weight: 500;
   font-size: 1.1rem;
   margin-bottom: var(--spacing-6);
   display: inline-block;
}
.mass-attribution-wizard .confirmation .success-message::before {
      content: '🎉 ';
}


.mass-attribution-wizard .confirmation-actions {
   margin-top: var(--spacing-6);
   display: flex;
   justify-content: center;
   gap: var(--spacing-4);
}


/* Boutons d'action du Wizard (général pour MassAttribution) */
.mass-attribution-wizard .wizard-actions {
   /* Hérite de .wizard-actions global */
}

.mass-attribution-wizard .btn-primary,
.mass-attribution-wizard .btn-secondary {
   padding: var(--spacing-sm) var(--spacing-lg); /* Standard Neo button padding */
   font-size: 0.875rem; /* Standard Neo button font size */
   /* Other properties will be inherited if these buttons also have .btn-primary/secondary classes */
}


/* Inputs et selects pour Wizard (général) */
.import-wizard .stylish-input,
.mass-attribution-wizard .stylish-input {
   /* Hérite des styles globaux pour input, select */
}

.import-wizard .select-stylish,
.mass-attribution-wizard .select-stylish {
   /* Hérite du style global .select-stylish */
}


/* Fin des styles pour MassAttribution */


/* Styles pour les cartes - Aligned with Neo UI .card principles */
.ui-card {
  background-color: var(--surface-card); /* Neo UI */
  border: 1px solid var(--border-subtle); /* Neo UI */
  border-radius: var(--radius-lg); /* Neo UI (12px) */
  margin-bottom: var(--spacing-lg); /* Neo UI (24px) */
  box-shadow: var(--shadow-md); /* Neo UI (aliased) */
  display: flex;
  flex-direction: column;
  transition: all var(--transition-normal); /* Neo UI */
  position: relative; 
  overflow: hidden; 
}
.ui-card:hover { /* Adding Neo UI hover effect */
   transform: translateY(-2px);
   box-shadow: var(--shadow-lg), var(--shadow-glow); /* --shadow-glow is from neo-ui */
   border-color: var(--border-default);
}

.ui-card-header {
  padding: var(--spacing-3) var(--spacing-4); /* Retained internal padding */
  border-bottom: 1px solid var(--border-subtle); /* Use Neo UI subtle border */
  background-color: transparent; 
}

.ui-card-header > h2,
.ui-card-header > h3,
.ui-card-header > h4 {
  margin: 0;
  font-size: 1.1rem; /* Retained */
  color: var(--text-primary); /* Aligned with global text color */
}

.ui-card-body {
  padding: var(--spacing-4); /* Retained internal padding */
  flex-grow: 1;
}

.ui-card-footer {
  padding: var(--spacing-3) var(--spacing-4); /* Retained internal padding */
  border-top: 1px solid var(--border-subtle); /* Use Neo UI subtle border */
  background-color: transparent; 
  display: flex;
  justify-content: flex-end;
  gap: var(--spacing-3);
}

.ui-card-nested {
  padding: var(--spacing-3);
  margin-top: var(--spacing-3);
  background-color: var(--surface-tertiary); /* Using Neo UI surface for nested */
  box-shadow: none;
  border-radius: var(--radius-md); /* Neo UI radius */
  border: 1px solid var(--border-default); /* Neo UI border */
}

/* ===== STYLES SPÉCIFIQUES POUR ADMINCATEGORIES.JSX (Refonte) ===== */

.admin-categories-container {
   display: flex;
   flex-direction: column;
   gap: var(--spacing-8);
   padding-top: var(--spacing-4);
}

@media (min-width: 992px) {
   .admin-categories-container {
      flex-direction: row;
      align-items: flex-start;
   }
}

.category-form-panel {
   flex: 1 1 550px;
   min-width: 300px;
   background-color: var(--surface-secondary); /* Was --surface-color */
   padding: var(--spacing-lg); /* Was --spacing-6 */
   border-radius: var(--radius-lg);
   box-shadow: var(--shadow-md);
   height: fit-content;
   border: 1px solid var(--border-default); /* Added Neo border */
}
.category-form-panel h3 {
   margin-top: 0;
   margin-bottom: var(--spacing-5);
   color: var(--color-primary-600);
   font-size: 1.5rem; /* 24px */
   border-bottom: 1px solid var(--border-color-light);
   padding-bottom: var(--spacing-3);
}
.category-form-panel h4 {
   margin-top: var(--spacing-6);
   margin-bottom: var(--spacing-3);
   font-size: 1.125rem; /* 18px */
   color: var(--text-color-primary);
   padding-bottom: var(--spacing-2);
   border-bottom: 1px solid var(--border-color-light);
}

.message-banner {
   padding: var(--spacing-3) var(--spacing-4);
   margin-bottom: var(--spacing-4);
   border-radius: var(--border-radius-md);
   font-size: 0.875rem;
   display: flex;
   align-items: center;
   gap: var(--spacing-2);
}
.message-banner.success-message {
   background-color: var(--color-primary-50);
   border: 1px solid var(--color-primary-500);
   color: var(--color-primary-700);
}
.message-banner.error-message {
   background-color: var(--color-danger-50);
   border: 1px solid var(--color-danger-500);
   color: var(--color-danger-700);
}
.message-banner.info-message {
   background-color: var(--color-primary-50);
   border: 1px solid var(--color-primary-500);
   color: var(--color-primary-700);
}

/* ===== BANNERS NOUVELLES ===== */
.banner {
   padding: var(--spacing-3) var(--spacing-4);
   margin-bottom: var(--spacing-4);
   border-radius: var(--border-radius-md);
   font-size: 0.875rem;
   display: flex;
   align-items: center;
   gap: var(--spacing-2);
}
.banner-success {
   background-color: var(--color-primary-50);
   border: 1px solid var(--color-primary-500);
   color: var(--color-primary-700);
}
.banner-error {
   background-color: var(--color-danger-50);
   border: 1px solid var(--color-danger-500);
   color: var(--color-danger-700);
}
.banner-warning {
   background-color: var(--color-warning-50);
   border: 1px solid var(--color-warning-500);
   color: var(--color-warning-700);
}
.banner-info {
   background-color: var(--color-primary-50);
   border: 1px solid var(--color-primary-500);
   color: var(--color-primary-700);
}

.no-fields-form-message {
   font-style: italic;
   color: var(--text-color-secondary);
   background-color: var(--color-neutral-50);
   padding: var(--spacing-3);
   border-radius: var(--border-radius-md);
   text-align: center;
   margin-bottom: var(--spacing-4);
}


.champ-form-item { /* Aligned with Neo UI card principles */
   background-color: var(--surface-card); /* Neo UI */
   border: 1px solid var(--border-subtle); /* Neo UI */
   border-radius: var(--radius-md); /* Neo UI */
   padding: var(--spacing-md); /* Neo UI (16px), was --spacing-4 (16px) - consistent */
   margin-bottom: var(--spacing-lg); /* Neo UI (24px), was --spacing-5 (20px) */
   box-shadow: var(--shadow-sm); /* Neo UI (aliased) */
   transition: all var(--transition-normal); /* Added for consistency */
}

.champ-form-item-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   margin-bottom: var(--spacing-3);
   padding-bottom: var(--spacing-3);
   border-bottom: 1px solid var(--border-color-light);
}
.champ-form-item-header h5 {
   margin: 0;
   font-size: 1rem; /* 16px */
   color: var(--text-color-primary);
   font-weight: 500;
}

.form-grid {
   display: grid;
   grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
   gap: var(--spacing-4);
   margin-bottom: var(--spacing-3);
}

/* Duplicated .champ-options-checkboxes was removed from here, already defined above */

.btn-icon-text {
   display: inline-flex;
   align-items: center;
   gap: var(--spacing-2);
}
.btn-icon-text svg {
   width: 1em;
   height: 1em;
}


.category-list-panel {
   flex: 1 1 40%;
   min-width: 300px;
   display: flex;
   flex-direction: column;
   gap: var(--spacing-6);
}

.category-section {
   background-color: var(--surface-color);
   padding: var(--spacing-5);
   border-radius: var(--border-radius-lg);
   box-shadow: var(--shadow-md);
}

.category-section-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   margin-bottom: var(--spacing-4);
   padding-bottom: var(--spacing-3);
   border-bottom: 1px solid var(--border-color-light);
}
.category-section-header h3 {
   margin: 0;
   font-size: 1.25rem; /* 20px */
   color: var(--text-color-primary);
}

.categories-list {
   list-style: none;
   padding: 0;
   margin: 0;
}

.category-item {
   display: flex;
   flex-wrap: wrap;
   justify-content: space-between;
   align-items: center;
   padding: var(--spacing-3) 0;
   border-bottom: 1px solid var(--border-color-light);
   gap: var(--spacing-3);
}
.category-item:last-child {
   border-bottom: none;
}
.category-item:hover {
   background-color: var(--color-neutral-50);
   border-radius: var(--border-radius-sm);
   margin: 0 calc(var(--spacing-2) * -1);
   padding: var(--spacing-3) var(--spacing-2);
}


.category-info {
   display: flex;
   flex-direction: column;
   gap: var(--spacing-1);
   flex-grow: 1;
}
.category-name {
   font-weight: 600;
   color: var(--color-neutral-800);
   font-size: 1rem; /* 16px */
}
.category-details {
   font-size: 0.8rem; /* 12px */
   color: var(--text-color-secondary);
}

.category-actions {
   display: flex;
   gap: var(--spacing-2);
   flex-shrink: 0;
}

.category-actions .btn-small {
   padding: var(--spacing-1) var(--spacing-2);
   font-size: 0.75rem;
   border-radius: var(--border-radius-sm);
}

.category-actions .btn-icon {
   display: inline-flex;
   align-items: center;
   gap: 0; /* Reset gap from any inherited style if this is purely an icon button */
   width: 32px; /* Consistent small icon button size */
   height: 32px; /* Consistent small icon button size */
   padding: 0; /* No padding, icon should be centered */
   justify-content: center; /* Center icon */
   border-radius: var(--radius-full); /* Circular */
   transition: all var(--transition-fast);
   /* Base color/border, can be overridden by specific semantic versions */
   background-color: transparent;
   color: var(--text-secondary);
   border: 1px solid transparent; /* Default to no visible border */
}
/* Hover for generic icon button in category actions */
.category-actions .btn-icon:hover {
    background-color: rgba(var(--theme-color-rgb), 0.1);
    color: var(--theme-color);
}


/* Specific semantic icon buttons in category-actions */
.category-actions .btn-secondary { /* Styled as a small, themed icon button */
   display: inline-flex; align-items: center; justify-content: center; width: 32px; height: 32px; padding: 0; border-radius: var(--radius-full); transition: all var(--transition-fast);
   background-color: transparent;
   color: var(--theme-color);
   border: 1px solid var(--theme-color); /* Themed outline */
}
.category-actions .btn-secondary:hover:not(:disabled) {
   background-color: rgba(var(--theme-color-rgb), 0.1);
   color: var(--theme-color-light); /* Or keep var(--theme-color) */
   border-color: var(--theme-color-light);
}

.category-actions .btn-danger { /* Styled as a small, danger icon button */
   display: inline-flex; align-items: center; justify-content: center; width: 32px; height: 32px; padding: 0; border-radius: var(--radius-full); transition: all var(--transition-fast);
   background-color: transparent;
   color: var(--color-danger-500);
   border: 1px solid var(--color-danger-500);
}
.category-actions .btn-danger:hover:not(:disabled) {
   background-color: rgba(var(--color-danger-500-rgb), 0.1);
   color: var(--color-danger-700); /* Darker danger color on hover */
   border-color: var(--color-danger-700);
}

.category-actions .btn-success { /* Styled as a small, success icon button */
   display: inline-flex; align-items: center; justify-content: center; width: 32px; height: 32px; padding: 0; border-radius: var(--radius-full); transition: all var(--transition-fast);
   background-color: transparent;
   color: var(--color-success-500);
   border: 1px solid var(--color-success-500);
}
.category-actions .btn-success:hover:not(:disabled) {
   background-color: rgba(var(--color-success-500-rgb), 0.1);
   color: var(--color-success-700); /* Darker success color on hover */
   border-color: var(--color-success-700);
}

.btn-small { /* For small text buttons, align with .btn-tertiary (ghost) but smaller */
   padding: var(--spacing-xs) var(--spacing-sm); /* 4px 8px */
   font-size: 0.75rem; /* 12px */
   font-weight: 600; /* Consistent with .btn-base */
   border-radius: var(--radius-sm); /* Smaller radius: 4px */
   background-color: transparent;
   color: var(--text-secondary);
   border: 1px solid var(--border-default);
   text-transform: none; /* Consistent with .btn-tertiary */
   letter-spacing: normal; /* Consistent with .btn-tertiary */
   transition: all var(--transition-fast);
   display: inline-flex; /* Ensure flex properties for alignment */
   align-items: center;
   justify-content: center;
   white-space: nowrap;
}
.btn-small:hover:not(:disabled) {
   background-color: rgba(255, 255, 255, 0.05);
   color: var(--text-primary);
   border-color: var(--border-strong);
}
.sub-tabs {
   display: flex;
   gap: var(--spacing-2);
   margin-bottom: var(--spacing-4);
}
.sub-tabs button { /* Align with .btn-tertiary (ghost) */
   padding: var(--spacing-sm) var(--spacing-lg); 
   font-size: 0.875rem; 
   font-weight: 600; 
   border-radius: var(--radius-md); 
   cursor: pointer; 
   transition: all var(--transition-fast);
   background-color: transparent;
   color: var(--text-secondary);
   border: 1px solid var(--border-default);
   text-transform: none; 
   letter-spacing: normal; 
   /* Added from .btn-base structure */
   display: inline-flex;
   align-items: center;
   justify-content: center;
   white-space: nowrap;
   position: relative;
   overflow: hidden;
}
.sub-tabs button.active {
   background: var(--theme-color); /* Neo UI: active tab often uses theme color */
   color: var(--text-on-theme);
   border-color: var(--theme-color);
   font-weight: 600; /* Retained from app.css active style */
}
.sub-tabs button:hover:not(.active):not(:disabled) { /* Added :not(:disabled) */
    background-color: rgba(255, 255, 255, 0.05); 
    color: var(--text-primary); 
    border-color: var(--border-strong); 
}

/* General .btn-icon, ensuring it's modernized if used elsewhere */
.btn-icon { 
   width: 40px; 
   height: 40px; 
   padding: 0; 
   border-radius: var(--radius-full); 
   background-color: transparent;
   /* border: 1px solid var(--border-default); */ /* Let specific instances define border if needed */
   border: 1px solid transparent; /* Default to no visible border */
   color: var(--text-secondary); 
   display: inline-flex;
   align-items: center;
   justify-content: center; 
   transition: all var(--transition-fast); 
   text-transform: none;
   letter-spacing: normal;
}
.btn-icon:hover:not(:disabled) { /* Added :not(:disabled) */
   background-color: rgba(var(--theme-color-rgb), 0.1);
   color: var(--theme-color);
   /* border-color: var(--theme-color); */ /* Only if initial border is visible */
}
.btn-icon svg { /* Ensure SVGs scale well within icon buttons */
   width: 1.25em; /* Adjust size as needed, e.g., 20px if font-size is 1em (14px) */
   height: 1.25em;
   vertical-align: middle;
}
/* Specific semantic general .btn-icon (if used) */
.btn-danger.btn-icon:hover:not(:disabled) { /* Added :not(:disabled) */
    background-color: rgba(var(--color-danger-500-rgb), 0.1);
    color: var(--color-danger-500);
    /* border-color: var(--color-danger-500); */
}
.btn-success.btn-icon:hover:not(:disabled) { /* Added :not(:disabled) */
    background-color: rgba(var(--color-success-500-rgb), 0.1);
    color: var(--color-success-500);
    /* border-color: var(--color-success-500); */
}
.btn-secondary.btn-icon { /* This is an icon button styled as secondary (outlined) */
    /* Ensures it picks up the main .btn-icon structure and then overrides for secondary look */
    border: 1px solid var(--theme-color);
    color: var(--theme-color);
}
.btn-secondary.btn-icon:hover:not(:disabled) { /* Added :not(:disabled) */
    background-color: rgba(var(--theme-color-rgb), 0.1);
    color: var(--theme-color-light); 
    border-color: var(--theme-color-light); 
}


.categories-list-masquees .category-item-masked {
   background-color: var(--color-warning-50);
   border-left: 3px solid var(--color-warning-500);
   padding-left: var(--spacing-3);
   opacity: 0.85;
}
.categories-list-masquees .category-item-masked .category-name {
   text-decoration: line-through;
   color: var(--color-neutral-500);
}
.categories-list-masquees .category-item-masked:hover {
   background-color: var(--color-warning-100);
}

.category-section .loading-message,
.category-section p {
   padding: var(--spacing-4);
   text-align: center;
   color: var(--text-color-secondary);
   font-style: italic;
}

/* Amélioration des contrôles de pagination */
.pagination-controls {
   display: flex;
   justify-content: center;
   align-items: center;
   gap: var(--spacing-3);
   padding: var(--spacing-4);
   background-color: var(--color-neutral-50);
   border-radius: var(--border-radius-md);
   border: 1px solid var(--border-color-light);
   margin-top: var(--spacing-4); /* Added margin for spacing */
}

.pagination-controls button {
   /* Inherits from .btn-secondary or similar, or define specific pagination button style */
   padding: var(--spacing-2) var(--spacing-4);
   font-size: 0.875rem;
}
.pagination-controls button:disabled {
   background-color: var(--color-neutral-100);
   border-color: var(--color-neutral-200);
   color: var(--color-neutral-400);
}

.pagination-controls span {
   font-weight: 500;
   color: var(--text-color-primary);
   padding: 0 var(--spacing-2);
   font-size: 0.875rem;
}

/* === STYLES POUR FICHE INDIVIDU (AJOUTS/MODIFICATIONS DEMANDÉS) === */

/* Styles pour les onglets Détails / Historique */
.tabs {
   display: flex;
   margin-bottom: 20px;
   border-bottom: 1px solid var(--border-color-light);
   padding: 0;
   overflow-x: auto; /* Pour scroller en cas de nombreux onglets */
}

.tab-button {
   padding: var(--spacing-2) var(--spacing-3);
   cursor: pointer;
   border: none;
   background-color: transparent;
   font-size: 0.875rem;
   font-weight: 500;
   color: var(--text-color-secondary);
   border-bottom: 2px solid transparent;
   transition: color 0.2s ease, border-color 0.2s ease, background-color 0.2s ease;
   margin-right: 6px;
   display: inline-flex;
   align-items: center;
   border-radius: 4px 4px 0 0;
   white-space: nowrap;
}

.tab-button:hover {
   color: var(--color-primary-500);
   background-color: var(--color-neutral-100);
}

.tab-button.active {
   color: var(--color-primary-700);
   font-weight: 600;
   border-bottom-color: var(--color-primary-600);
   background-color: var(--color-primary-50);
}

/* Style différencié pour l'onglet Historique actif */
.tab-button.active.active-historique {
   background-color: var(--color-neutral-500);
   color: white;
   border-bottom-color: var(--color-neutral-700);
}
.tab-button.active.active-historique:hover {
   background-color: var(--color-neutral-700);
}

/* Styles pour la modale fiche individu */
.fiche-individu-modal { /* This might be the same as .modal-overlay */
   /* position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.5); display: flex; justify-content: center; align-items: center; z-index: 1000; */
}

.fiche-individu-modal .modal-content { /* Ciblage plus spécifique pour éviter conflits */
   background: var(--surface-color);
   border-radius: var(--border-radius-xl);
   width: 90%;
   max-width: 850px;
   height: 90vh; /* Hauteur fixe pour éviter les problèmes de redimensionnement */
   overflow: hidden; /* Masque le débordement */
   box-shadow: var(--shadow-xl);
   display: flex;
   flex-direction: column;
   animation: none; /* Annule l'animation slideInUpModal si elle cause des problèmes ici */
}

.modal-header { /* Style générique pour les headers de modale, peut être surchargé */
   display: flex;
   justify-content: space-between;
   align-items: center;
   padding: var(--spacing-4) var(--spacing-6);
   background-color: var(--color-neutral-50);
   border-bottom: 1px solid var(--border-color-light);
}

.modal-header h2 {
   margin: 0;
   font-size: 1.25rem;
   display: flex;
   align-items: center;
}

.close-button { /* This might be .btn-fermer or a specific icon button */
   background: none;
   border: none;
   cursor: pointer;
   color: var(--text-color-secondary);
   border-radius: 50%;
   width: 36px;
   height: 36px;
   display: flex;
   align-items: center;
   justify-content: center;
   transition: background-color 0.2s;
}

.close-button:hover {
   background-color: var(--color-neutral-100);
   color: var(--color-danger-500);
}

.modal-body { /* Style générique pour les corps de modale */
   padding: var(--spacing-4) var(--spacing-6);
   flex-grow: 1;
   overflow-y: auto;
}

/* Styles pour les champs en lecture seule */
.form-input[readOnly],
.form-textarea[readOnly],
.form-select[disabled], /* select is disabled, not readonly */
input[type="text"][readOnly], /* Be more specific */
textarea[readOnly] {
   background-color: var(--background-color-readonly-display) !important;
   color: var(--text-color-secondary) !important;
   border: 1px dashed var(--border-color-readonly-display) !important; /* Use specific readonly border */
   cursor: not-allowed;
   opacity: 0.8;
   box-shadow: none !important; /* Remove inner shadow for readonly */
}
.form-input-readonly { /* If this is a wrapper class */
      /* styles for the wrapper */
}


/* Style pour les valeurs affichées en mode non-édition */
.form-value-display.form-value-readonly { /* More specific class name might be good */
   background-color: var(--background-color-readonly-display);
   padding: var(--spacing-2) var(--spacing-3); /* Match input padding */
   border-radius: var(--border-radius-md);
   border: 1px solid var(--border-color-readonly-display);
   color: var(--text-color-primary);
   min-height: calc(1.5em + (var(--spacing-2) * 2) + 2px); /* Match input height */
   display: flex;
   align-items: center;
   word-break: break-word;
   line-height: 1.5;
   font-size: 0.875rem; /* Match input font-size */
}

/* Styles pour l'affichage modernisé de l'historique */
.audit-timeline {
   margin-top: 20px;
   position: relative;
   padding-left: 40px; /* Espace pour la ligne et les icônes */
}

.audit-timeline::before {
   content: '';
   position: absolute;
   left: 15px; /* (Icon Width / 2) - (Line width / 2) if icon is 30px and line 3px -> 15 - 1.5 = 13.5, adjust for padding */
   top: 10px;
   bottom: 10px;
   width: 3px;
   background-color: var(--border-color-light);
   border-radius: 3px;
}

.audit-entry {
   background-color: var(--color-neutral-50);
   border: 1px solid var(--border-color-light);
   border-radius: var(--border-radius-lg);
   padding: 15px;
   margin-bottom: 20px;
   position: relative;
   box-shadow: var(--shadow-sm);
   display: flex; /* Using flex for icon and details alignment */
   gap: 15px; /* Gap between icon area and details */
}

.audit-icon-type { /* This is the dot on the timeline */
   flex-shrink: 0;
   width: 30px; /* Diameter of the dot */
   height: 30px;
   border-radius: 50%;
   background-color: var(--color-primary-100);
   color: var(--color-primary-500);
   display: flex;
   align-items: center;
   justify-content: center;
   position: absolute;
   left: -23px; /* -( (Icon Width / 2) + padding-left from audit-timeline - (timeline-line-left-pos) ) */
                     /* Example: -( (30/2) + 0 - 15px centered on line) => -22.5px approx with border */
   top: 15px; /* Align with content */
   border: 2px solid var(--surface-color); /* To make it pop from the line */
   /* Ensure this icon is actually displayed, needs content or an SVG */
}

.audit-details {
   flex-grow: 1;
   padding-left: 15px; /* Space from where the icon is, if icon is part of flex */
}

.audit-header {
   display: flex;
   justify-content: space-between;
   align-items: flex-start; /* Align items to the top */
   margin-bottom: 10px;
   flex-wrap: wrap; /* Allow wrapping for smaller screens */
   gap: 5px; /* Gap between items if they wrap */
}

.audit-field-action {
   font-weight: 600;
   color: var(--text-color-primary);
   font-size: 1.05em;
}

.audit-field-name {
   font-style: italic;
   color: var(--color-primary-500);
}

.audit-user-time {
   font-size: 0.85em;
   color: var(--text-color-secondary);
   text-align: right;
   flex-shrink: 0; /* Prevent shrinking on small screens */
}

.audit-user {
   font-weight: 500;
}

.audit-date {
   margin-left: 5px; /* Space between user and date */
   display: inline-flex; /* Align icon with text if any */
   align-items: center;
}

.audit-body {
   margin-top: 8px;
   font-size: 0.95em;
}

.audit-value-change {
   display: flex;
   align-items: baseline; /* Align text baselines */
   gap: 8px;
   flex-wrap: wrap; /* Allow wrapping */
   line-height: 1.6; /* Improve readability */
}

.audit-value-label {
   font-weight: 500;
   color: var(--text-color-secondary);
   font-size: 0.9em;
}

.audit-old-value {
   text-decoration: line-through;
   color: var(--color-danger-500);
   background-color: var(--color-danger-50);
   padding: 3px 6px;
   border-radius: 4px;
}

.audit-new-value {
   font-weight: bold;
   color: var(--color-success-500);
   background-color: var(--color-success-50);
   padding: 3px 6px;
   border-radius: 4px;
}

.audit-arrow {
   color: var(--color-primary-500); /* Or a neutral color like --text-color-secondary */
   font-weight: bold;
   font-size: 1.2em; /* Make arrow more prominent */
}

.audit-import-info {
   margin-top: 10px;
   font-size: 0.85em;
   color: var(--text-color-secondary);
   background-color: var(--color-primary-50);
   padding: 4px 8px;
   border-radius: 4px;
   display: inline-flex; /* To keep content tight */
   align-items: center;
   border: 1px solid var(--color-primary-100);
}

/* Styles for the main info of the individual (already present, checked for consistency) */
/* .fiche-main-info { ... } */
/* .info-grid { ... } */
/* .info-cell-label { ... } */
/* .info-cell-value { ... } */
/* .highlight { ... } */

/* Styles for the dynamic fields section */
.dynamic-fields-grid {
   display: grid;
   grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
   gap: 20px; /* Consistent gap */
}

.form-message { /* General message styling for forms inside modal, if any */
   padding: 12px 15px;
   margin: 0 var(--spacing-6) var(--spacing-4); /* Consistent with modal padding */
   border-radius: var(--border-radius-md); /* Consistent radius */
   display: flex;
   align-items: center;
   font-size: 0.95em;
   border: 1px solid transparent;
}

.message-info {
   background-color: var(--color-primary-50);
   color: var(--color-primary-700);
   border-color: var(--color-primary-500); /* Or --color-primary-200 for softer border */
}

.message-success {
   background-color: var(--color-primary-50);
   color: var(--color-primary-700);
   border-color: var(--color-primary-500); /* Or --color-primary-200 */
}

.message-error {
   background-color: var(--color-danger-50);
   color: var(--color-danger-700);
   border-color: var(--color-danger-500); /* Or --color-danger-200 */
}

/* Styles for buttons in the footer */
.modal-footer {
   display: flex;
   justify-content: flex-end; /* Align buttons to the right */
   gap: var(--spacing-3); /* Consistent gap */
   padding: var(--spacing-4) var(--spacing-6);
   border-top: 1px solid var(--border-color-light);
   background-color: var(--color-neutral-50); /* Light background for footer */
}

/* Using existing .btn-primary and .btn-secondary, ensure they are suitable or override here */
/* .modal-footer .btn-primary { ... } */
/* .modal-footer .btn-secondary { ... } */
/* Fallback/general button styles if not using .btn-primary/secondary directly: */
.button-primary { /* if used as a generic class */
   background-color: var(--color-primary-500);
   color: white;
   border: none;
   border-radius: var(--border-radius-md);
   padding: var(--spacing-2) var(--spacing-4); /* Use spacing variables */
   cursor: pointer;
   font-weight: 500;
   display: inline-flex;
   align-items: center;
   transition: background-color 0.2s;
}

.button-primary:hover {
   background-color: var(--color-primary-600);
}

.button-secondary { /* if used as a generic class */
   background-color: var(--color-neutral-500);
   color: white; /* Or var(--text-color-primary) if background is lighter */
   border: none;
   border-radius: var(--border-radius-md);
   padding: var(--spacing-2) var(--spacing-4); /* Use spacing variables */
   cursor: pointer;
   font-weight: 500;
   display: inline-flex;
   align-items: center;
   transition: background-color 0.2s, color 0.2s, border-color 0.2s;
}

.button-secondary:hover {
   background-color: var(--color-neutral-700);
}


/* ===== AJUSTEMENTS RESPONSIVES ===== */
@media (max-width: 768px) {
   .app {
      padding: 0 var(--spacing-4) var(--spacing-4);
   }

   header.app-header { /* Plus spécifique */
      flex-direction: column;
      align-items: flex-start;
      gap: var(--spacing-4);
   }
   .app-body {
      flex-direction: column;
   }
   .main-nav {
      width: 100%;
      border-right: none;
      border-bottom: 1px solid var(--border-color-medium);
      display: flex;
      overflow-x: auto; /* Permet   la nav de défiler horizontalement si elle est trop large */
      height: auto; /* Reset height for horizontal layout */
      top: var(--header-height); /* S'assurer que la nav est sous le header sticky */
   }
   .main-nav ul {
      flex-direction: row;
      width: 100%;
      justify-content: flex-start;
      padding-bottom: var(--spacing-2);
   }
   .main-nav ul li button.active {
      border-left: none;
      border-bottom: 4px solid var(--color-primary-600);
   }
   .content {
      width: 100%; /* Prend toute la largeur en mode mobile */
   }

   .actions-bar {
      flex-direction: column;
      align-items: stretch;
      gap: var(--spacing-3); /* Updated gap */
   }
   .search-container {
      width: 100%;
   }
   .buttons-container {
      width: 100%;
      flex-direction: column;
      gap: var(--spacing-2); /* From new block suggestion */
   }
   .buttons-container button,
   .buttons-container .add-button, /* Ensure these specific buttons are also full width */
   .buttons-container .columns-button {
      width: 100%;
   }
   .view-mode-selector { /* From new block */
      width: 100%;
      justify-content: center; /* Center buttons if container is full width */
   }
   .view-mode-selector button {
         flex-grow: 1; /* Make buttons in view mode selector take equal space */
         justify-content: center;
   }


   .modal-content {
      max-width: 95%;
      max-height: 85vh;
   }

   .fiche-header {
      flex-direction: column;
      align-items: flex-start;
      gap: var(--spacing-3);
   }
   .fiche-header h2 {
      margin-bottom: var(--spacing-2);
   }
   .fiche-actions {
      width: 100%;
      flex-direction: column;
      gap: var(--spacing-2);
   }
   .fiche-actions button {
      width: 100%;
   }


   .fiche-content .info-grid {
      grid-template-columns: 1fr;
      gap: var(--spacing-1) 0;
   }
   .fiche-content .info-cell-label {
      padding-right: 0;
      margin-bottom: var(--spacing-1);
      font-weight: normal;
      text-align: left;
   }
   .fiche-content .info-cell-value {
      margin-bottom: var(--spacing-3);
      text-align: left;
   }


   .form-row {
      flex-direction: column;
      align-items: stretch;
   }
   .form-row > * {
      width: 100%;
      margin-bottom: var(--spacing-3);
   }

   /* Responsive Table Adjustments (not full card mode yet) */
   .table-responsive {
      border-radius: var(--border-radius-md); /* Softer radius on mobile */
   }
   .data-table {
      font-size: 0.8rem; /* Slightly smaller font for tables on mobile */
   }
   .data-table th,
   .data-table td {
      padding: var(--spacing-2) var(--spacing-1); /* Reduced padding */
        white-space: normal; /* Allow text wrapping in cells for mobile */
        word-break: break-word; /* Break long words */
   }
   .data-table th {
      font-size: 0.7rem; /* Smaller header font */
   }
   .data-table .filter-row input {
      font-size: 0.75rem;
      padding: var(--spacing-1) var(--spacing-1); /* Adjust filter input padding */
   }
   .data-table td:first-child, .data-table th:first-child {
         text-align: left; /* Revert centered actions column for more space if needed, or keep */
   }


   /* Styles responsifs pour la fiche individu */
   .fiche-individu-modal .modal-content { /* More specific */
      width: 95%;
      height: 95vh;
   }

   .info-grid { /* This might refer to fiche-main-info .info-grid */
      grid-template-columns: 1fr;
   }

   .dynamic-fields-grid {
      grid-template-columns: 1fr;
   }

   .audit-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
   }
   .audit-user-time {
      text-align: left;
      width: 100%;
   }
   .audit-value-change {
      flex-direction: column; /* Stack old/new values */
      align-items: flex-start;
      gap: 5px;
   }
   .audit-arrow {
      display: none; /* Hide arrow when values are stacked */
   }
   .modal-footer {
      flex-direction: column-reverse; /* Stack buttons, primary usually last so it's on top */
   }
   .modal-footer button { /* Make footer buttons full width */
      width: 100%;
   }

   .admin-categories-container {
         /* No specific change here, already flex-column by default */
   }
   .category-form-panel, .category-list-panel {
      flex-basis: 100%;
   }
   .form-grid { /* General form grid, already covered? */
      /* grid-template-columns: 1fr; */ /* Already applied if this targets the same .form-grid */
   }
   .category-item {
      flex-direction: column;
      align-items: flex-start;
   }
   .category-actions {
      width: 100%;
      margin-top: var(--spacing-2);
      justify-content: flex-start;
   }
     .category-actions .btn-small {
      padding: var(--spacing-2) var(--spacing-3);
      font-size: 0.825rem;
   }

}

/* Mode carte pour très petits écrans (pour .data-table) */
@media (max-width: 576px) {
   .table-responsive .data-table,
   .table-responsive .data-table thead,
   .table-responsive .data-table tbody,
   .table-responsive .data-table th,
   .table-responsive .data-table td,
   .table-responsive .data-table tr {
      display: block; /* Key for card mode */
   }

   .table-responsive .data-table thead {
      display: none; /* Hide table headers, use data-label */
   }

   .table-responsive .data-table tr {
      border: 1px solid var(--border-color-medium);
      border-radius: var(--border-radius-md);
      margin-bottom: var(--spacing-3);
      padding: var(--spacing-3);
      background-color: var(--surface-color);
      box-shadow: var(--shadow-sm);
   }
     .table-responsive .data-table tr.filter-row { /* Hide filter row in card mode */
            display: none;
      }

   .table-responsive .data-table td {
      border: none; /* Remove cell borders */
      border-bottom: 1px dashed var(--border-color-light); /* Separator for data items */
      padding: var(--spacing-2) 0; /* Adjust padding */
      text-align: right; /* Align value to the right */
      display: flex; /* Use flex for label and value */
      justify-content: space-between; /* Space out label and value */
      align-items: center;
      white-space: normal; /* Allow text wrapping */
      overflow: visible; /* Ensure content is not clipped */
      text-overflow: unset; /* Disable ellipsis */
   }

   .table-responsive .data-table td:last-child {
      border-bottom: none; /* No border for the last item */
   }

   .table-responsive .data-table td::before {
      content: attr(data-label) ": "; /* Use data-label for pseudo-header */
      font-weight: 600; /* Make label bold */
      color: var(--text-color-secondary);
      text-align: left; /* Align label to the left */
      margin-right: var(--spacing-3);
      flex-grow: 1; /* Allow label to take available space */
      white-space: nowrap; /* Prevent label from wrapping if possible */
   }

   /* Special handling for the first cell (often actions) in card mode */
   .table-responsive .data-table td:first-child {
      text-align: center; /* Center actions */
      justify-content: center; /* Center actions if flex */
      border-bottom: 1px solid var(--border-color-medium); /* Separator if actions are above data */
      margin-bottom: var(--spacing-2);
      padding-bottom: var(--spacing-3);
   }
   .table-responsive .data-table td:first-child::before {
      display: none; /* No label for the actions cell */
   }
}

.loading-overlay {
   position: absolute;
   inset: 0;
   background: rgba(255, 255, 255, 0.8);
   display: flex;
   flex-direction: column;
   justify-content: center;
   align-items: center;
   z-index: 100;
}
.loading-overlay .progress-bar {
   width: 80%;
   height: 16px;
   background: var(--color-neutral-200);
   border-radius: var(--border-radius-md);
   overflow: hidden;
   margin-top: var(--spacing-4);
}
.loading-overlay .progress {
   background: var(--color-primary-500);
   height: 100%;
   width: 0;
   transition: width 0.2s ease;
}

/* === Modern extended fiche styles === */
.modal-content-fullsize {
   width: 95vw;
   height: 90vh;
   max-width: 1500px;
   max-height: 850px;
   background: var(--surface-container-lowest);
   border-radius: 16px;
   box-shadow: var(--shadow-xl);
   overflow: hidden;
   display: flex;
   flex-direction: column;
}

.fiche-individu-modern-extended {
   display: grid;
   grid-template-columns: var(--sidebar-width-extended, 320px) 1fr var(--actions-panel-width-extended, 300px);
   grid-template-rows: 60px 1fr;
   height: 100%;
}

.fiche-header-extended {
   grid-column: 1 / -1;
   background: var(--surface-container);
   border-bottom: 1px solid var(--border-color-light);
   padding: var(--spacing-4) var(--spacing-6);
   display: flex;
   align-items: center;
   justify-content: space-between;
}

.individu-sidebar-extended {
   background: var(--surface-container-low);
   padding: var(--spacing-6);
   border-right: 1px solid var(--border-color-light);
   overflow-y: auto;
}

.main-content-extended {
   overflow-y: auto;
}

.actions-panel-extended {
   background: var(--surface-container-low);
   padding: var(--spacing-6);
   border-left: 1px solid var(--border-color-light);
   overflow-y: auto;
}
/* === Modern extended fiche additional styles === */
:root {
   --content-padding-extended: 32px;
   --text-subtitle-large: 1.125rem;
   --elevation-4: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
   --elevation-5: 0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22);
}

.content-header {
   background: var(--surface-container-low);
   border-bottom: 1px solid var(--border-color-light);
   padding: var(--spacing-4) var(--spacing-6);
   display: flex;
   justify-content: space-between;
   align-items: center;
   gap: var(--spacing-4);
}

.content-body {
   flex: 1;
   padding: var(--content-padding-extended);
   overflow-y: auto;
}

.form-grid-extended {
   display: grid;
   grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
   gap: var(--spacing-6);
   margin-bottom: var(--spacing-8);
}

.form-field-extended {
   background: var(--surface-color);
   border-radius: var(--border-radius-lg);
   padding: var(--spacing-6);
   box-shadow: var(--shadow-sm);
   position: relative;
   transition: box-shadow 200ms ease, transform 200ms ease;
}

.form-field-extended:hover {
   box-shadow: var(--shadow-md);
   transform: translateY(-2px);
}

.form-field-extended.size-full {
   grid-column: 1 / -1;
}

.actions-panel-extended {
   display: flex;
   flex-direction: column;
   gap: var(--spacing-6);
}

.timeline-extended {
   background: var(--surface-color);
   border-radius: var(--border-radius-lg);
   padding: var(--spacing-6);
   box-shadow: var(--shadow-sm);
   max-height: 400px;
   overflow-y: auto;
}

@media (max-width: 1200px) {
   .fiche-individu-modern-extended {
      grid-template-columns: 1fr;
      grid-template-rows: auto auto 1fr;
   }
   .individu-sidebar-extended,
   .actions-panel-extended {
      display: none;
   }
}

/* Styles pour les cartes - Aligned with Neo UI .card principles */
.ui-card {
  background-color: var(--surface-card); /* Neo UI */
  border: 1px solid var(--border-subtle); /* Neo UI */
  border-radius: var(--radius-lg); /* Neo UI (12px) */
  margin-bottom: var(--spacing-lg); /* Neo UI (24px) */
  box-shadow: var(--shadow-md); /* Neo UI (aliased) */
  display: flex;
  flex-direction: column;
  transition: all var(--transition-normal); /* Neo UI */
  position: relative; 
  overflow: hidden; 
}
.ui-card:hover { /* Adding Neo UI hover effect */
   transform: translateY(-2px);
   box-shadow: var(--shadow-lg), var(--shadow-glow); /* --shadow-glow is from neo-ui */
   border-color: var(--border-default);
}

.ui-card-header {
  padding: var(--spacing-3) var(--spacing-4); /* Retained internal padding */
  border-bottom: 1px solid var(--border-subtle); /* Use Neo UI subtle border */
  background-color: transparent; 
}

.ui-card-header > h2,
.ui-card-header > h3,
.ui-card-header > h4 {
  margin: 0;
  font-size: 1.1rem; /* Retained */
  color: var(--text-primary); /* Aligned with global text color */
}

.ui-card-body {
  padding: var(--spacing-4); /* Retained internal padding */
  flex-grow: 1;
}

.ui-card-footer {
  padding: var(--spacing-3) var(--spacing-4); /* Retained internal padding */
  border-top: 1px solid var(--border-subtle); /* Use Neo UI subtle border */
  background-color: transparent; 
  display: flex;
  justify-content: flex-end;
  gap: var(--spacing-3);
}

.ui-card-nested {
  padding: var(--spacing-3);
  margin-top: var(--spacing-3);
  background-color: var(--surface-tertiary); /* Using Neo UI surface for nested */
  box-shadow: none;
  border-radius: var(--radius-md); /* Neo UI radius */
  border: 1px solid var(--border-default); /* Neo UI border */
}

:root {
  --clr-primary: #2563eb;
  --clr-primary-dark: #1e40af;
}

body { margin:0; font-family:system-ui; }

/* === Modern UI Components === */
.glass-effect {
  background: var(--glass-bg);
  backdrop-filter: blur(var(--backdrop-blur));
  border: 1px solid var(--glass-border);
}

.card {
  background: var(--glass-bg);
  backdrop-filter: blur(var(--backdrop-blur));
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-lg);
  padding: 24px;
  box-shadow: var(--shadow-card);
  transition: all var(--transition-normal);
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-xl);
}

.btn {
  padding: 10px 20px;
  border-radius: var(--radius-md);
  font-weight: 500;
  font-size: 1rem;
  border: none;
  cursor: pointer;
  transition: all var(--transition-fast);
  display: inline-flex;
  align-items: center;
  gap: 8px;
  position: relative;
  overflow: hidden;
}

.btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
}

.btn:active::before {
  width: 300px;
  height: 300px;
}

.btn-primary {
  background: var(--accent-gradient);
  color: var(--text-on-accent);
}

.btn-ghost {
  background: transparent;
  color: var(--text-secondary);
  border: 1px solid var(--glass-border);
}

.btn-icon {
  width: 40px;
  height: 40px;
  padding: 0;
  justify-content: center;
  border-radius: var(--radius-full);
}

/* Stat Cards */
.stat-card {
  background: var(--glass-bg);
  backdrop-filter: blur(var(--backdrop-blur));
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-lg);
  padding: 24px;
  position: relative;
  overflow: hidden;
}

.stat-card::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -50%;
  width: 200%;
  height: 200%;
  background: var(--accent-gradient);
  opacity: 0.1;
  transform: rotate(45deg);
}

.stat-icon {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  margin-bottom: 16px;
}

.stat-value {
  font-size: 2rem;
  font-weight: 700;
  color: var(--text-primary);
  line-height: 1.2;
}

.stat-label {
  font-size: 1rem;
  color: var(--text-secondary);
  margin-top: 4px;
}

.stat-trend {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-top: 12px;
  font-size: 0.875rem;
}

.trend-up {
  color: #10b981;
}

.trend-down {
  color: #ef4444;
}

/* Circular Progress */
.circular-progress {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.circular-progress-content {
  position: absolute;
  text-align: center;
}

.circular-progress-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-primary);
}

.circular-progress-label {
  font-size: 0.75rem;
  color: var(--text-secondary);
  margin-top: 4px;
}

/* Theme toggle */
.theme-toggle {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-full);
  background: transparent;
  border: 1px solid var(--glass-border);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--transition-fast);
  color: #000;
}

.theme-toggle:hover {
  background: var(--accent-primary);
  color: white;
  transform: scale(1.05);
}

/* Sidebar */

.sidebar-header {
  padding: 24px;
  border-bottom: 1px solid var(--glass-border);
}

.sidebar-nav {
  flex: 1;
  padding: 24px 16px;
  overflow-y: auto;
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  border-radius: var(--radius-md);
  border: none;
  color: var(--sidebar-text-color);
  text-decoration: none;
  font-size: 1rem;
  font-weight: 500;
  transition: all var(--transition-fast);
  margin-bottom: 4px;
  position: relative;
}

.nav-item:hover {
  background: var(--sidebar-hover-bg);
  color: var(--text-primary);
}

.nav-item.active {
  background: var(--sidebar-active-bg);
  color: var(--sidebar-active-text-color);
}

[data-theme="light"] .app-sidebar {
  background: var(--surface-level-1);
  border-right: 1px solid rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .nav-item {
  color: var(--text-secondary-light);
}

[data-theme="light"] .nav-item:hover {
  background: var(--surface-overlay);
  color: var(--text-primary-light);
}

[data-theme="light"] .nav-item.active {
  background: rgba(var(--theme-color-rgb), 0.08);
  color: var(--theme-color);
  border-left: 3px solid var(--theme-color);
}


.nav-icon {
  width: 24px;
  height: 24px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  vertical-align: middle;
}

.sidebar-footer {
  padding: 24px;
  border-top: 1px solid var(--glass-border);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-3);
}

.user-details {
  font-size: 0.75rem;
  line-height: 1.3;
  color: var(--sidebar-text-color);
}

.user-details .user-name {
  font-weight: 600;
}

.footer-actions {
  display: flex;
  align-items: center;
  gap: var(--spacing-2);
}

/* Window Controls */
.window-controls {
  display: flex;
  gap: 6px;
  position: absolute;
  top: 4px;
  right: 4px;
  -webkit-app-region: no-drag;
}

.window-control {
  width: 46px;
  height: 32px;
  border: none !important;
  background: transparent !important;
  color: #000000;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 150ms ease;
  font-family: inherit;
  -webkit-app-region: no-drag;
  user-select: none;
  border-radius: var(--radius-sm);
  box-shadow: none !important;
}

.window-control:hover {
  background: var(--color-neutral-100) !important;
  color: #000000 !important;
}

.window-control.close:hover {
  background: #E81123 !important;
  color: #000000 !important;
}


.titlebar {
  -webkit-app-region: drag;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 16px;
  background: var(--titlebar-bg);
  color: var(--titlebar-text-color);
  border-bottom: 1px solid var(--glass-border);
}

.titlebar button {
  -webkit-app-region: no-drag;
}

/* Toasts */
.toast-container {
  position: fixed;
  top: 24px;
  right: 24px;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.toast {
  background: var(--bg-secondary);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-md);
  padding: 16px;
  box-shadow: var(--shadow-lg);
  display: flex;
  align-items: flex-start;
  gap: 12px;
  min-width: 300px;
  max-width: 400px;
}

.toast-icon {
  flex-shrink: 0;
}

.toast-success .toast-icon {
  color: #10b981;
}

.toast-error .toast-icon {
  color: #ef4444;
}

.toast-info .toast-icon {
  color: #3b82f6;
}

.toast-content {
  flex: 1;
}

.toast-title {
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.toast-message {
  font-size: 0.875rem;
  color: var(--text-secondary);
}

.toast-close {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.toast-close:hover {
  color: var(--text-primary);
}


/* Dashboard layout */
.dashboard-grid {
  display: grid;
  gap: 24px;
  grid-template-columns: 1fr;
}

.stats-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
}

.charts-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}


/* Responsive Design */

@media (max-width: 768px) {
  .stats-row {
    grid-template-columns: 1fr;
  }

  .charts-row {
    grid-template-columns: 1fr;
  }

  .modal {
    max-width: 95vw;
    margin: 16px;
  }

  .form-grid {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 480px) {
  .card {
    padding: 16px;
  }

  .stat-value {
    font-size: 1.5rem;
  }

  .modern-table {
    font-size: 0.875rem;
  }

  .modern-table th,
  .modern-table td {
    padding: 12px 8px;
  }
}

/* ==== Application Layout ==== */
.app-container {
  display: grid;
  grid-template-columns: 280px 1fr;
  height: 100vh;
  overflow: hidden;
}

.app-sidebar {
  background: var(--sidebar-bg);
  border-right: 1px solid var(--border-color-light);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
}

.app-main {
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.app-header {
  position: relative;
  height: 60px;
  background: var(--header-background);
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding: 0 var(--spacing-4);
  border-bottom: 1px solid var(--border-color-light);
  -webkit-app-region: drag;
}

.app-content {
  flex: 1;
  overflow-y: auto;
  padding: var(--spacing-6);
}

.app-footer {
  height: 40px;
  background: var(--bg-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
  border-top: 1px solid var(--border-color-light);
}

@media (max-width: 768px) {
  .app-container {
    grid-template-columns: 1fr;
  }
  .app-sidebar {
    position: fixed;
    left: 0;
    top: 0;
    width: 280px;
    height: 100vh;
    z-index: 1000;
    transform: translateX(-100%);
    transition: transform 0.3s ease;
  }
  .app-sidebar.mobile-open {
    transform: translateX(0);
  }
}


/* === CONTRÔLES DE FENÊTRE AMÉLIORÉS === */
.window-controls {
  display: flex;
  gap: 1px;
  position: absolute;
  top: 0;
  right: 0;
  -webkit-app-region: no-drag;
  z-index: 1001;
}

.window-control {
  width: 46px;
  height: 32px;
  border: none !important;
  background: transparent !important;
  color: #000000;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 150ms ease;
  font-family: inherit;
  -webkit-app-region: no-drag;
  user-select: none;
  border-radius: var(--radius-sm);
  box-shadow: none !important;
}

.window-control:hover {
  background: var(--color-neutral-100) !important;
  color: #000000 !important;
}

.window-control.close:hover {
  background: #E81123 !important;
  color: #000000 !important;
}

.window-control-icon {
  color: inherit;
  background: transparent;
  font-size: 16px;
  font-weight: 300;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
}

/* Icônes spécifiques pour chaque contrôle */
.window-control.minimize .window-control-icon {
  font-size: 18px;
  font-weight: 400;
}

.window-control.maximize .window-control-icon {
  font-size: 14px;
  font-weight: 400;
}

.window-control.close .window-control-icon {
  font-size: 20px;
  font-weight: 300;
}

/* === BOUTON DE THÈME AMÉLIORÉ === */
.theme-toggle {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-sm);
  background: transparent;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background-color var(--transition-fast);
  color: var(--titlebar-icon-color);
  -webkit-app-region: no-drag;
}

.theme-toggle::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
  opacity: 0;
  transition: opacity 300ms ease;
}

.theme-toggle:hover {
  background: var(--titlebar-button-hover-bg);
}

.theme-toggle:hover::before {
  opacity: 1;
}

.theme-toggle:active {
  transform: scale(0.95);
}

.theme-icon {
  font-size: 18px;
  line-height: 1;
  transition: transform 300ms ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.theme-toggle:hover .theme-icon {
  transform: rotate(15deg);
}

/* === ADAPTATION POUR MODE SOMBRE === */
[data-theme="dark"] .window-control {
  color: var(--titlebar-icon-color) !important;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

[data-theme="dark"] .window-control:hover {
  background: var(--sidebar-hover-bg) !important;
  color: var(--titlebar-icon-color) !important;
}

[data-theme="dark"] .window-control.close:hover {
  background: #ef4444 !important;
  color: var(--titlebar-icon-color) !important;
}

/* === ADAPTATION POUR MODE CLAIR === */
[data-theme="light"] .window-control {
  color: #000000 !important;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

[data-theme="light"] .window-control:hover {
  background: var(--color-neutral-100) !important;
  color: #000000 !important;
}

[data-theme="light"] .window-control.close:hover {
  background: #E81123 !important;
  color: #000000 !important;
}

[data-theme="dark"] .theme-toggle {
  color: var(--titlebar-icon-color);
}

[data-theme="dark"] .theme-toggle:hover {
  background: var(--titlebar-button-hover-bg);
}

/* === RESPONSIVE === */
@media (max-width: 768px) {
  .window-controls {
    position: relative;
    top: auto;
    right: auto;
    justify-content: flex-end;
    margin-left: auto;
  }
  
  .window-control {
    width: 44px;
    height: 44px;
  }
  
  .theme-toggle {
    width: 44px;
    height: 44px;
  }
}

/* === ALTERNATIVE AVEC FONT AWESOME (optionnel) === */
/* 
Si vous voulez utiliser Font Awesome au lieu des symboles Unicode,
ajoutez cette ligne dans votre index.html :
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

Puis remplacez les symboles par :
- Minimize: <i className="fas fa-window-minimize"></i>
- Maximize: <i className="fas fa-window-maximize"></i>
- Close: <i className="fas fa-times"></i>
- Sun: <i className="fas fa-sun"></i>
- Moon: <i className="fas fa-moon"></i>
*/

/* === EFFETS VISUELS ADDITIONNELS === */
.window-control,
.theme-toggle {
  position: relative;
}

.window-control::after,
.theme-toggle::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: radial-gradient(circle at center, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
  opacity: 0;
  transform: scale(0);
  transition: opacity 200ms ease, transform 200ms ease;
}

.window-control:active::after,
.theme-toggle:active::after {
  opacity: 1;
  transform: scale(1);
}
